webpackJsonp([8],{"8ThQ":function(e,t,n){e.exports=n.p+"static/img/2.d93b15e.jpg"},JCUO:function(e,t,n){"use strict";var a=n("mtWM"),i=n.n(a),r=n("GKmE"),o=n("NYxO"),c=n("WTx0"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(i,r){try{var o=t[i](r),c=o.value}catch(e){return void n(e)}if(!o.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}("next")})}}t.a={name:"",data:function(){return{window:window,active:2,avatarFileObj:"",isNameShow:!1,isNumberShow:!1,isIntroduceShow:!1,isSexShow:!1,isBirthdayShow:!1,isProfessionShow:!1,isAreaShow:!1,isLanguageShow:!1,fileList:[],fileBackgroundList:[],minDate:new Date(100,0,1),maxDate:new Date(3e3,10,1),currentDate:new Date(2022,0,1),avatar:"",nickname:"",username:"",showBirthdayPicker:!1,LanguageActions:[{name:"中文",label:"zh"},{name:"English",label:"en"}],isconfirm:!0,language:"zh",usdt_balance:0,h2o_balance:0}},created:function(){var e;(e=localStorage.getItem("i18nextLng"))&&void 0!==e&&(this.language=e)},computed:s({},Object(o.c)({address:function(e){return e.base.address},userId:function(e){return e.base.userId},isConnected:function(e){return e.base.isConnected},apiUrl:function(e){return e.base.apiUrl},isMobel:function(e){return e.comps.isMobel}}),{changeData:function(){return{address:this.address,apiUrl:this.apiUrl,userId:this.userId}}}),watch:{changeData:{immediate:!0,handler:function(e){(e.address||e.userId>0)&&this.getUserInfo()}}},components:{},mounted:function(){},methods:{getUserInfo:function(){var e=this;return u(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.get(e.apiUrl+"/Api/User/getUserInfo",{params:{address:e.address,userId:e.userId}}).then(function(){var t=u(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n&&1e4==n.code?(console.log(n.data),e.username=n.data.username,e.nickname=n.data.nickname,e.avatar=n.data.avatar,e.usdt_balance=Number(n.data.local_balance)+Number(n.data.wallet_balance),e.h2o_balance=Number(n.data.h2o_local_balance)+Number(n.data.h2o_wallet_balance),n.data.avatar&&""!==n.data.avatar&&(e.fileList[0]={url:n.data.avatar},e.$forceUpdate())):e.$message({type:"warning",message:"Error"}),t.abrupt("return");case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.$message({type:"warning",message:t})});case 2:case"end":return t.stop()}},t,e)}))()},afterReadUpload:function(e){var t=this;return u(regeneratorRuntime.mark(function n(){var a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e){n.next=13;break}return e.status="uploading",e.message="上传中...",n.next=5,t.ImageCompressionProcessing(e.file);case 5:if(!(a=n.sent)){n.next=13;break}return(r=new FormData).append("file",a),r.append("images_key","avatar"),r.append("userId",t.userId),n.next=13,i.a.post(t.apiUrl+"/Api/User/saveUserInfo",r).then(function(){var n=u(regeneratorRuntime.mark(function n(a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!a||1e4!=a.code){n.next=5;break}return e.status="done",e.message="上传成功",n.next=5,t.getUserInfo();case 5:case"end":return n.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}()).catch(function(n){e.status="failed",e.message="上传失败",t.$message({type:"warning",message:n})});case 13:case"end":return n.stop()}},n,t)}))()},ImageCompressionProcessing:function(e){var t=this;return u(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(){var n=u(regeneratorRuntime.mark(function n(a,i){var o,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.i)(e);case 2:o=n.sent,c=new FileReader,o&&(c.readAsDataURL(o),c.onerror=function(e){t.$message({type:"warning",message:"压缩图片读取图片异常...."}),console.log("压缩图片读取图片异常....",e),a(!1)},c.onload=function(e){a(o)});case 5:case"end":return n.stop()}},n,t)}));return function(e,t){return n.apply(this,arguments)}}()));case 1:case"end":return n.stop()}},n,t)}))()},saveAvator:function(){this.$refs.avatarRef.chooseFile()},onClickSure:function(){this.isNameShow=!1},onClickSave:function(){this.$router.go(-1)},onClickSaveUserInfo:function(e,t){var n=this;return u(regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=d({userId:n.userId},e,t),a.next=3,i.a.post(n.apiUrl+"/Api/User/saveUserInfo",r).then(function(){var e=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&1e4==t.code?(n.isNameShow=!1,n.isIntroduceShow=!1,n.isSexShow=!1,n.isBirthdayShow=!1):n.$message({type:"warning",message:"Error"}),e.abrupt("return");case 2:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){n.$message({type:"warning",message:e})});case 3:case"end":return a.stop()}},a,n)}))()},onConfirm:function(e){this.birthday=this.timeFormat(e),this.showBirthdayPicker=!1},addressStr:function(){return this.address&&void 0!=this.address&&""!=this.address?this.address.substring(0,4)+"***"+this.address.substring(this.address.length-3):"Connect Wallet"},subAddress:function(e){return e.substring(0,4)+"***"+e.substring(e.length-3)},connectWalletClick:function(){var e=this;return u(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0!=window.ethereum){t.next=3;break}return e.$message({type:"warning",message:"You do not have metamask installed"}),t.abrupt("return",!1);case 3:if(e.address&&void 0!=e.address&&""!=e.address){t.next=8;break}return t.next=6,Object(c.c)();case 6:t.next=10;break;case 8:return t.next=10,Object(c.b)();case 10:case"end":return t.stop()}},t,e)}))()},languageClick:function(e){this.language=e.label,this.$i18n.i18next.changeLanguage(e.label)},getUsdtDepositWithdraw:function(){this.$router.push("/usdt")},getH2ODepositWithdraw:function(){this.$router.push("/h2o")},loginEvent:function(){this.$router.push("/login")},setUpInfo:function(){if(console.log(this.userId),!this.userId||this.userId<=0)return this.$message({type:"warning",message:"Error"}),!1;this.$router.push("/user/setup")}}}},WokE:function(e,t,n){"use strict";var a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"bg",style:{backgroundSize:e.isMobel?"100% 100%":""}}),e._v(" "),n("van-nav-bar",{attrs:{title:e.$t("question:setUp"),"left-text":"","right-text":"","left-arrow":""},on:{"click-left":e.onClickSave}}),e._v(" "),n("div",{staticClass:"box"},[n("div",{staticClass:"avator"},[n("van-uploader",{ref:"avatarRef",staticClass:"uploader",attrs:{accept:"image/*",deletable:!0,"max-count":"1","after-read":e.afterReadUpload,"preview-full-image":!1},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1),e._v(" "),n("div",{staticClass:"item"},[n("div",{staticClass:"item-index"},[n("van-cell",{attrs:{"is-link":"",title:e.$t("question:walletAddress")},on:{click:function(t){return e.connectWalletClick()}}},[e.window.ethereum?n("div",[e._v(e._s(e.addressStr()))]):e.window.ethereum||e.userId?n("div",[e._v(e._s(e.address?e.subAddress(e.address):"Connect Wallet"))]):n("div",{on:{click:function(t){return e.loginEvent()}}},[e._v(e._s(e.$t("question:logInRegister")))])])],1),e._v(" "),n("div",{staticClass:"item-index"},[n("van-cell",{attrs:{"is-link":"",title:e.$t("question:username")}},[n("div",[e._v(e._s(e.username?e.username:"Unnamed"))])])],1),e._v(" "),n("div",{staticClass:"item-index"},[n("van-cell",{attrs:{"is-link":"",title:e.$t("question:accountBinding")},on:{click:function(t){return e.setUpInfo()}}})],1),e._v(" "),n("div",{staticClass:"item-index"},[n("van-cell",{attrs:{"is-link":"",title:"USDT"+e.$t("question:Balance")},on:{click:function(t){return e.getUsdtDepositWithdraw()}}},[n("div",[e._v(e._s(e.toFixed(e.usdt_balance,4))+" USDT")])])],1),e._v(" "),n("div",{staticClass:"item-index"},[n("van-cell",{attrs:{"is-link":"",title:"H2O"+e.$t("question:Balance")},on:{click:function(t){return e.getH2ODepositWithdraw()}}},[n("div",[e._v(e._s(e.toFixed(e.h2o_balance,4))+" H2O")])])],1),e._v(" "),n("div",{staticClass:"item-index"},[n("van-cell",{attrs:{"is-link":"",title:e.$t("question:nickname")},on:{click:function(t){e.isNameShow=!0}}},[n("div",[e._v(e._s(e.nickname?e.nickname:e.$t("question:enterName")))])]),e._v(" "),n("van-action-sheet",{staticClass:"van-sheet",attrs:{title:"","close-on-click-action":""},model:{value:e.isNameShow,callback:function(t){e.isNameShow=t},expression:"isNameShow"}},[n("van-nav-bar",{attrs:{title:e.$t("question:editName"),"left-text":e.$t("question:Cancel"),"right-text":e.$t("question:Save")},on:{"click-left":function(t){e.isNameShow=!1},"click-right":function(t){return e.onClickSaveUserInfo("nickname",e.nickname)}}}),e._v(" "),n("van-cell-group",[n("van-field",{attrs:{label:"",placeholder:e.$t("question:addName")},model:{value:e.nickname,callback:function(t){e.nickname=t},expression:"nickname"}})],1),e._v(" "),n("span",{staticClass:"hint"},[e._v(e._s(e.$t("question:editNamePlease")))])],1)],1),e._v(" "),n("div",{staticClass:"item-index"},[n("van-cell",{attrs:{"is-link":"",title:e.$t("question:language")},on:{click:function(t){e.isLanguageShow=!0}}},["zh"===e.language?n("div",[e._v("中文")]):n("div",[e._v("English")])]),e._v(" "),n("van-action-sheet",{staticClass:"van-language-sheet",attrs:{actions:e.LanguageActions,"cancel-text":e.$t("question:Cancel"),"close-on-click-action":""},on:{select:e.languageClick},model:{value:e.isLanguageShow,callback:function(t){e.isLanguageShow=t},expression:"isLanguageShow"}})],1)])])],1)},staticRenderFns:[]};t.a=a},"e/9Z":function(e,t,n){var a=n("yPEF");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("04d70ee6",a,!0,{})},md3T:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("JCUO"),i=n("WokE");var r=function(e){n("e/9Z")},o=n("VU/8")(a.a,i.a,!1,r,"data-v-3f830ec4",null);t.default=o.exports},yPEF:function(e,t,n){var a=n("kxFB");(e.exports=n("FZ+f")(!0)).push([e.i,".container[data-v-3f830ec4] .bg{background-image:url("+a(n("8ThQ"))+");background-repeat:no-repeat;background-attachment:fixed;background-position:50%;top:0;left:0;width:100%;height:100%;z-index:-10;position:fixed;filter:blur(2px)}.container[data-v-3f830ec4] .van-nav-bar{background-color:transparent}.container[data-v-3f830ec4] .van-nav-bar .van-nav-bar__left i{color:#fff;font-size:20px}.container[data-v-3f830ec4] .van-nav-bar .van-nav-bar__title{color:#fff}.container[data-v-3f830ec4] .box{width:90%;height:80vh;margin:0 auto;background-color:#ae8bf5;margin-top:30px;border-radius:30px}.container[data-v-3f830ec4] .box .content{padding:16px 16px 160px}.container[data-v-3f830ec4] .box .van-popup--bottom.van-popup--round{height:100vh}.container[data-v-3f830ec4] .box .van-action-sheet{max-height:100%}.container[data-v-3f830ec4] .box .avator{padding:20px;text-align:center}.container[data-v-3f830ec4] .box .avator .preview{width:100px;height:100px;border-radius:50px}.container[data-v-3f830ec4] .box .avator .upload-icon{color:#dcdee0;font-size:24px;top:50%;left:50%;margin-top:-12px;margin-left:-12px;position:absolute}.container[data-v-3f830ec4] .box .avator .uploader{display:flex;width:100px;height:100px;border-radius:100%;margin:0 auto;background-color:#f7f8fa}.container[data-v-3f830ec4] .box .avator .uploader .van-uploader__preview-image,.container[data-v-3f830ec4] .box .avator .uploader .van-uploader__upload{width:100px;height:100px}.container[data-v-3f830ec4] .box .avator .uploader .van-uploader__input-wrapper{position:unset}.container[data-v-3f830ec4] .box .avator .photograph{position:relative;margin:0 auto;width:20px;height:20px;background-color:#000;border-radius:100%;left:35px;font-size:20px;bottom:20px}.container[data-v-3f830ec4] .box .avator .photograph img{width:15px;height:15px;margin-bottom:2px}.container[data-v-3f830ec4] .box .item .item-index{border-bottom:1px solid #a79ba9}.container[data-v-3f830ec4] .box .item .item-index .van-cell{background-color:#ae8bf5;color:#fff}.container[data-v-3f830ec4] .box .item .item-index .van-cell .van-cell__value{color:#fff}.container[data-v-3f830ec4] .box .item .item-index .van-cell--clickable{height:50px;line-height:30px;vertical-align:middle}.container[data-v-3f830ec4] .box .item .item-index .van-popup{background-color:#ae8bf5}.container[data-v-3f830ec4] .box .item .item-index .van-popup .van-nav-bar__text{color:#fff}.container[data-v-3f830ec4] .box .item .item-index .hint{color:#fff;padding-left:15px}.container[data-v-3f830ec4] .box .item .item-index .van-cell__left-icon,.container[data-v-3f830ec4] .box .item .item-index .van-cell__right-icon{line-height:30px;color:#fff}.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-cell,.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-picker{width:95%;border-radius:15px;margin:0 auto}.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-cell-group{margin:10px;border-radius:15px}.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-cell-group .van-cell{background-color:#fff;border-radius:15px}.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-hairline--top-bottom:after{border-width:inherit!important}.container[data-v-3f830ec4] .box .item .item-index .van-language-sheet{height:auto!important}.container[data-v-3f830ec4] .box .item .item-index .background-classname{height:100px;line-height:80px}.container[data-v-3f830ec4] .box .item .item-index .background-classname .van-cell__right-icon{line-height:80px}.container[data-v-3f830ec4] .box .item .item-index .background-classname .van-uploader__mask-message{margin-top:0!important;line-height:unset!important}","",{version:3,sources:["/Users/qinlinhui/Sites/WWW/AnswerQuestions/src/views/user/index.vue"],names:[],mappings:"AACA,gCAAgC,+CAAkD,4BAA4B,4BAA4B,wBAA2B,MAAM,OAAO,WAAW,YAAY,YAAY,eAAe,gBAAgB,CACnP,AACD,yCAAyC,4BAA4B,CACpE,AACD,8DAA8D,WAAW,cAAc,CACtF,AACD,6DAA6D,UAAU,CACtE,AACD,iCAAiC,UAAU,YAAY,cAAc,yBAAyB,gBAAgB,kBAAkB,CAC/H,AACD,0CAA0C,uBAAuB,CAChE,AACD,qEAAqE,YAAY,CAChF,AACD,mDAAmD,eAAe,CACjE,AACD,yCAAyC,aAAa,iBAAiB,CACtE,AACD,kDAAkD,YAAY,aAAa,kBAAkB,CAC5F,AACD,sDAAsD,cAAc,eAAe,QAAQ,SAAS,iBAAiB,kBAAkB,iBAAiB,CACvJ,AACD,mDAAmD,aAAa,YAAY,aAAa,mBAAmB,cAAc,wBAAwB,CACjJ,AAGD,yJAAgF,YAAY,YAAY,CACvG,AACD,gFAAgF,cAAc,CAC7F,AACD,qDAAqD,kBAAkB,cAAc,WAAW,YAAY,sBAAuB,mBAAmB,UAAU,eAAe,WAAW,CACzL,AACD,yDAAyD,WAAW,YAAY,iBAAiB,CAChG,AACD,mDAAmD,+BAA+B,CACjF,AACD,6DAA6D,yBAAyB,UAAU,CAC/F,AACD,8EAA8E,UAAU,CACvF,AACD,wEAAwE,YAAY,iBAAiB,qBAAqB,CACzH,AACD,8DAA8D,wBAAwB,CACrF,AACD,iFAAiF,UAAU,CAC1F,AACD,yDAAyD,WAAW,iBAAiB,CACpF,AACD,iJAAiJ,iBAAiB,UAAU,CAC3K,AACD,kJAAkJ,UAAU,mBAAmB,aAAa,CAC3L,AACD,8EAA8E,YAAY,kBAAkB,CAC3G,AACD,wFAAwF,sBAAsB,kBAAkB,CAC/H,AACD,8FAA+F,8BAA+B,CAC7H,AACD,uEAAuE,qBAAsB,CAC5F,AACD,yEAAyE,aAAa,gBAAgB,CACrG,AACD,+FAA+F,gBAAgB,CAC9G,AACD,qGAAqG,uBAAwB,2BAA4B,CACxJ",file:"index.vue",sourcesContent:['\n.container[data-v-3f830ec4] .bg{background-image:url("../../assets/answer/2.jpg");background-repeat:no-repeat;background-attachment:fixed;background-position:center;top:0;left:0;width:100%;height:100%;z-index:-10;position:fixed;filter:blur(2px)\n}\n.container[data-v-3f830ec4] .van-nav-bar{background-color:transparent\n}\n.container[data-v-3f830ec4] .van-nav-bar .van-nav-bar__left i{color:#fff;font-size:20px\n}\n.container[data-v-3f830ec4] .van-nav-bar .van-nav-bar__title{color:#fff\n}\n.container[data-v-3f830ec4] .box{width:90%;height:80vh;margin:0 auto;background-color:#AE8BF5;margin-top:30px;border-radius:30px\n}\n.container[data-v-3f830ec4] .box .content{padding:16px 16px 160px\n}\n.container[data-v-3f830ec4] .box .van-popup--bottom.van-popup--round{height:100vh\n}\n.container[data-v-3f830ec4] .box .van-action-sheet{max-height:100%\n}\n.container[data-v-3f830ec4] .box .avator{padding:20px;text-align:center\n}\n.container[data-v-3f830ec4] .box .avator .preview{width:100px;height:100px;border-radius:50px\n}\n.container[data-v-3f830ec4] .box .avator .upload-icon{color:#dcdee0;font-size:24px;top:50%;left:50%;margin-top:-12px;margin-left:-12px;position:absolute\n}\n.container[data-v-3f830ec4] .box .avator .uploader{display:flex;width:100px;height:100px;border-radius:100%;margin:0 auto;background-color:#f7f8fa\n}\n.container[data-v-3f830ec4] .box .avator .uploader .van-uploader__upload{width:100px;height:100px\n}\n.container[data-v-3f830ec4] .box .avator .uploader .van-uploader__preview-image{width:100px;height:100px\n}\n.container[data-v-3f830ec4] .box .avator .uploader .van-uploader__input-wrapper{position:unset\n}\n.container[data-v-3f830ec4] .box .avator .photograph{position:relative;margin:0 auto;width:20px;height:20px;background-color:black;border-radius:100%;left:35px;font-size:20px;bottom:20px\n}\n.container[data-v-3f830ec4] .box .avator .photograph img{width:15px;height:15px;margin-bottom:2px\n}\n.container[data-v-3f830ec4] .box .item .item-index{border-bottom:1px solid #A79BA9\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-cell{background-color:#AE8BF5;color:#fff\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-cell .van-cell__value{color:#fff\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-cell--clickable{height:50px;line-height:30px;vertical-align:middle\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-popup{background-color:#AE8BF5\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-popup .van-nav-bar__text{color:#fff\n}\n.container[data-v-3f830ec4] .box .item .item-index .hint{color:#fff;padding-left:15px\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-cell__left-icon,.container[data-v-3f830ec4] .box .item .item-index .van-cell__right-icon{line-height:30px;color:#fff\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-cell,.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-picker{width:95%;border-radius:15px;margin:0 auto\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-cell-group{margin:10px;border-radius:15px\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-cell-group .van-cell{background-color:#fff;border-radius:15px\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-sheet .van-hairline--top-bottom::after{border-width:inherit !important\n}\n.container[data-v-3f830ec4] .box .item .item-index .van-language-sheet{height:auto !important\n}\n.container[data-v-3f830ec4] .box .item .item-index .background-classname{height:100px;line-height:80px\n}\n.container[data-v-3f830ec4] .box .item .item-index .background-classname .van-cell__right-icon{line-height:80px\n}\n.container[data-v-3f830ec4] .box .item .item-index .background-classname .van-uploader__mask-message{margin-top:0 !important;line-height:unset !important\n}\n'],sourceRoot:""}])}});