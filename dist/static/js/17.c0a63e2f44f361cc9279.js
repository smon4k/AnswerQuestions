webpackJsonp([17],{JYBz:function(t,n,a){var e=a("kxFB");(t.exports=a("FZ+f")(!0)).push([t.i,".container[data-v-6b228124] .bg{background-image:url("+e(a("Zj3x"))+");background-repeat:no-repeat;background-attachment:fixed;background-position:50%;top:0;left:0;width:100%;height:100%;z-index:-10;position:fixed}.container[data-v-6b228124] .van-nav-bar{background-color:transparent}.container[data-v-6b228124] .van-nav-bar .van-nav-bar__left i{color:#fff;font-size:20px}.container[data-v-6b228124] .van-nav-bar .van-nav-bar__title{color:#fff}.container[data-v-6b228124] .van-tabs__nav{background-color:transparent}.container[data-v-6b228124] .van-tabs__nav .van-tabs__line{background-color:#fdd95b!important}.container[data-v-6b228124] .van-empty__description,.container[data-v-6b228124] .van-tabs__nav .van-tab--active{color:#fff}.container[data-v-6b228124] .main{padding-bottom:60px}.container[data-v-6b228124] .main .van-cell-group--inset{height:250px;margin-top:10px;border:2px solid #fff;border-radius:20px}.container[data-v-6b228124] .main .van-cell-group--inset .van-cell{background-color:transparent;color:#fff}.container[data-v-6b228124] .main .van-cell-group--inset .van-cell .van-cell__value{display:none}.container[data-v-6b228124] .main .van-cell-group--inset .van-cell .van-cell__label{color:#fff}.container[data-v-6b228124] .main .van-button--primary{border:0}.container[data-v-6b228124] .main .list-bg{background:linear-gradient(#00c3e9,#2d50d2);position:absolute;width:100%;height:100%}.container[data-v-6b228124] .main .top-title{height:63px}.container[data-v-6b228124] .main .top-title .van-cell__title{display:flex;align-items:center;justify-content:space-around;flex-direction:column}.container[data-v-6b228124] .main .top-title .van-cell__title .van-row{line-height:45px}.container[data-v-6b228124] .main .center-content{height:110px}.container[data-v-6b228124] .main .center-content .van-cell__title{display:flex;align-items:center;justify-content:space-around;flex-direction:column}.container[data-v-6b228124] .main .center-content .van-cell__title .van-row{line-height:45px}.container[data-v-6b228124] .main .center-content .left{font-size:16px;color:#f8f5ea}.container[data-v-6b228124] .main .center-content .right{font-size:14px;margin-left:10px;color:#fff}.container[data-v-6b228124] .main .bottom-button{position:absolute;bottom:8px}.container[data-v-6b228124] .main .ticket-button{width:90px;height:30px;font-size:10px;border-radius:20px;background-color:#8c1af5;border:0}.container[data-v-6b228124] .main .redeemed-button{width:90px;height:40px;background:url("+e(a("UJJQ"))+") no-repeat 50%;background-size:contain;text-align:center}.container[data-v-6b228124] .main .redeemed-button-disabled{width:90px;height:40px;background:url("+e(a("zBbg"))+") no-repeat 50%;background-size:contain;text-align:center}.container[data-v-6b228124] .main .view-rewards{height:40px;background:url("+e(a("duWs"))+") no-repeat 50%;background-size:contain;text-align:center}.container[data-v-6b228124] .main .buy-button{width:100px;height:30px;font-size:10px;border-radius:20px;background-color:#8c1af5;border:0}.container[data-v-6b228124] .main .van-tag--primary.van-tag--plain{color:#8c1af5}","",{version:3,sources:["/Users/qinlinhui/Sites/WWW/AnswerQuestions/src/views/ticket/my.vue"],names:[],mappings:"AACA,gCAAgC,+CAAwD,4BAA4B,4BAA4B,wBAA2B,MAAM,OAAO,WAAW,YAAY,YAAY,cAAc,CACxO,AACD,yCAAyC,4BAA4B,CACpE,AACD,8DAA8D,WAAW,cAAc,CACtF,AACD,6DAA6D,UAAU,CACtE,AACD,2CAA2C,4BAA4B,CACtE,AACD,2DAA2D,kCAAmC,CAC7F,AAGD,gHAAoD,UAAU,CAC7D,AACD,kCAAkC,mBAAmB,CACpD,AACD,yDAAyD,aAAa,gBAAgB,sBAAsB,kBAAkB,CAC7H,AACD,mEAAmE,6BAA6B,UAAU,CACzG,AACD,oFAAoF,YAAY,CAC/F,AACD,oFAAoF,UAAU,CAC7F,AACD,uDAAuD,QAAQ,CAC9D,AACD,2CAA2C,4CAA6C,kBAAkB,WAAW,WAAW,CAC/H,AACD,6CAA6C,WAAW,CACvD,AACD,8DAA8D,aAAa,mBAAmB,6BAA6B,qBAAqB,CAC/I,AACD,uEAAuE,gBAAgB,CACtF,AACD,kDAAkD,YAAY,CAC7D,AACD,mEAAmE,aAAa,mBAAmB,6BAA6B,qBAAqB,CACpJ,AACD,4EAA4E,gBAAgB,CAC3F,AACD,wDAAwD,eAAe,aAAa,CACnF,AACD,yDAAyD,eAAe,iBAAiB,UAAU,CAClG,AACD,iDAAiD,kBAAkB,UAAU,CAC5E,AACD,iDAAiD,WAAW,YAAY,eAAe,mBAAmB,yBAAyB,QAAQ,CAC1I,AACD,mDAAmD,WAAW,YAAY,uDAA2E,wBAAwB,iBAAiB,CAC7L,AACD,4DAA4D,WAAW,YAAY,uDAAoF,wBAAwB,iBAAiB,CAC/M,AACD,gDAAgD,YAAY,uDAAwE,wBAAwB,iBAAiB,CAC5K,AACD,8CAA8C,YAAY,YAAY,eAAe,mBAAmB,yBAAyB,QAAQ,CACxI,AACD,mEAAmE,aAAa,CAC/E",file:"my.vue",sourcesContent:['\n.container[data-v-6b228124] .bg{background-image:url("../../assets/answer/home-bg.png");background-repeat:no-repeat;background-attachment:fixed;background-position:center;top:0;left:0;width:100%;height:100%;z-index:-10;position:fixed\n}\n.container[data-v-6b228124] .van-nav-bar{background-color:transparent\n}\n.container[data-v-6b228124] .van-nav-bar .van-nav-bar__left i{color:#fff;font-size:20px\n}\n.container[data-v-6b228124] .van-nav-bar .van-nav-bar__title{color:#fff\n}\n.container[data-v-6b228124] .van-tabs__nav{background-color:transparent\n}\n.container[data-v-6b228124] .van-tabs__nav .van-tabs__line{background-color:#FDD95B !important\n}\n.container[data-v-6b228124] .van-tabs__nav .van-tab--active{color:#fff\n}\n.container[data-v-6b228124] .van-empty__description{color:#fff\n}\n.container[data-v-6b228124] .main{padding-bottom:60px\n}\n.container[data-v-6b228124] .main .van-cell-group--inset{height:250px;margin-top:10px;border:2px solid #fff;border-radius:20px\n}\n.container[data-v-6b228124] .main .van-cell-group--inset .van-cell{background-color:transparent;color:#fff\n}\n.container[data-v-6b228124] .main .van-cell-group--inset .van-cell .van-cell__value{display:none\n}\n.container[data-v-6b228124] .main .van-cell-group--inset .van-cell .van-cell__label{color:#fff\n}\n.container[data-v-6b228124] .main .van-button--primary{border:0\n}\n.container[data-v-6b228124] .main .list-bg{background:linear-gradient(#00C3E9, #2D50D2);position:absolute;width:100%;height:100%\n}\n.container[data-v-6b228124] .main .top-title{height:63px\n}\n.container[data-v-6b228124] .main .top-title .van-cell__title{display:flex;align-items:center;justify-content:space-around;flex-direction:column\n}\n.container[data-v-6b228124] .main .top-title .van-cell__title .van-row{line-height:45px\n}\n.container[data-v-6b228124] .main .center-content{height:110px\n}\n.container[data-v-6b228124] .main .center-content .van-cell__title{display:flex;align-items:center;justify-content:space-around;flex-direction:column\n}\n.container[data-v-6b228124] .main .center-content .van-cell__title .van-row{line-height:45px\n}\n.container[data-v-6b228124] .main .center-content .left{font-size:16px;color:#f8f5ea\n}\n.container[data-v-6b228124] .main .center-content .right{font-size:14px;margin-left:10px;color:#fff\n}\n.container[data-v-6b228124] .main .bottom-button{position:absolute;bottom:8px\n}\n.container[data-v-6b228124] .main .ticket-button{width:90px;height:30px;font-size:10px;border-radius:20px;background-color:#8C1AF5;border:0\n}\n.container[data-v-6b228124] .main .redeemed-button{width:90px;height:40px;background:url("../../assets/answer/redeemed-button.png") no-repeat center;background-size:contain;text-align:center\n}\n.container[data-v-6b228124] .main .redeemed-button-disabled{width:90px;height:40px;background:url("../../assets/answer/redeemed-button-disabled.png") no-repeat center;background-size:contain;text-align:center\n}\n.container[data-v-6b228124] .main .view-rewards{height:40px;background:url("../../assets/answer/view-rewards.png") no-repeat center;background-size:contain;text-align:center\n}\n.container[data-v-6b228124] .main .buy-button{width:100px;height:30px;font-size:10px;border-radius:20px;background-color:#8C1AF5;border:0\n}\n.container[data-v-6b228124] .main .van-tag--primary.van-tag--plain{color:#8C1AF5\n}\n'],sourceRoot:""}])},eSQX:function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=a("fKcC"),i=a("wc/0");var r=function(t){a("qagH")},o=a("VU/8")(e.a,i.a,!1,r,"data-v-6b228124",null);n.default=o.exports},fKcC:function(t,n,a){"use strict";a("XmAh");var e=a("il3B"),i=a("mtWM"),r=a.n(i),o=a("NYxO"),s=a("QKB9"),c=a.n(s),l=a("cx+2"),d=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t};function A(t){return function(){var n=t.apply(this,arguments);return new Promise(function(t,a){return function e(i,r){try{var o=n[i](r),s=o.value}catch(t){return void a(t)}if(!o.done)return Promise.resolve(s).then(function(t){e("next",t)},function(t){e("throw",t)});t(s)}("next")})}}n.a={name:"",data:function(){return{list:[],loading:!1,finished:!1,limit:20,page:1,total:0,radio:0,ticketStatus:!1,SCTPrice:0,active:"1",loadingShow:!0}},created:function(){this.getSCTPrice()},watch:{changeData:{immediate:!0,handler:function(t){console.log(t),t.userId&&this.getMyTicketList()}}},computed:d({},Object(o.c)({address:function(t){return t.base.address},userId:function(t){return t.base.userId},isConnected:function(t){return t.base.isConnected},apiUrl:function(t){return t.base.apiUrl},isMobel:function(t){return t.comps.isMobel}}),{changeData:function(){return{address:this.address,userId:this.userId}}}),components:{},methods:{getSCTPrice:function(){var t=this;return A(regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return 1e9,n.next=3,Object(l.e)(c.a.routerContractAddress,c.a.SCT,c.a.BUSDT);case 3:a=n.sent,t.SCTPrice=t.keepDecimalNotRounding(a,4);case 5:case"end":return n.stop()}},n,t)}))()},startBuy:function(t){this.$router.push({path:"/ticket/detail",query:{type:1,ticket_id:t.id}})},getMyTicketList:function(t){var n=this;return A(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:n.finished&&(n.list=[],n.finished=!1),(!t||void 0==t||t.length<=0)&&(t={limit:n.limit,page:n.page,userId:n.userId}),n.userId&&r.a.get(n.apiUrl+"/Answer/Ticket/getMyTicketList",{params:t}).then(function(a){n.loading=!1,console.log(a),1e4==a.code?(a.data&&a.data.lists&&a.data.lists.length>0&&(n.page<=1?n.list=a.data.lists:t.page<=a.data.allpage&&n.list.push(a.data.lists)),t.page>=a.data.allpage&&(n.finished=!0),n.total=a.data.count,n.page+=1,console.log(n.list)):n.$notify({type:"warning",message:"加载数据失败"}),n.loadingShow=!1}).catch(function(t){n.$notify({type:"warning",message:t})}),n.loading=!1;case 4:case"end":return a.stop()}},a,n)}))()},onClickLeft:function(){this.$router.go(-1)},startTicket:function(t){var n=this;e.a.confirm({title:"",message:"门票只能开启一张，确认切换吗？"}).then(function(){r.a.get(n.apiUrl+"/Answer/Ticket/startTicket",{params:{userId:n.userId,ticket_id:t.ticket_id,user_ticket_id:t.id}}).then(function(t){1e4==t.code?(n.$notify({type:"success",message:"门票开启成功"}),setTimeout(function(){n.list=[],n.page=1,n.getMyTicketList()},1e3)):n.$notify({type:"warning",message:"开启失败"})}).catch(function(t){n.$notify({type:"warning",message:t})})}).catch(function(){console.log("已取消切换")})},showTicketAward:function(t){this.$router.push({path:"/ticket/my/award",query:{type:1,user_ticket_id:t.id,ticket_name:t.name}})},startRansom:function(t){console.log(t),this.$router.push({path:"/ticket/detail",query:{type:2,ticket_id:t.ticket_id,user_ticket_id:t.id}})},buyTicket:function(){this.$router.push("/ticket/list")},cealPaybackPeriod:function(t){var n=10/(t.capped*this.SCTPrice);return this.keepDecimalNotRounding(n,1,!0)},getRealInterestRate:function(t){var n;return n=Number(t.capped)*this.SCTPrice*365/Number(t.buy_price)*100,this.toFixed(n,2)+"%"}},mounted:function(){}}},qagH:function(t,n,a){var e=a("JYBz");"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);a("rjj0")("472277e6",e,!0,{})},"wc/0":function(t,n,a){"use strict";var e={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[e("div",{staticClass:"bg",style:{backgroundSize:t.isMobel?"100% 100%":""}}),t._v(" "),e("van-nav-bar",{attrs:{title:t.$t("question:myTicket"),"left-text":"","left-arrow":"","right-text":""},on:{"click-left":t.onClickLeft}}),t._v(" "),e("div",{staticClass:"main"},[t.list.length?e("div",[e("van-tabs",{model:{value:t.active,callback:function(n){t.active=n},expression:"active"}},[e("van-tab",{attrs:{title:t.$t("question:bought")}},t._l(t.list,function(n,i){return e("div",{key:i},[1==n.is_ransom?e("van-cell-group",{attrs:{inset:""}},[e("div",{staticClass:"list-bg"}),t._v(" "),e("van-cell",{staticClass:"top-title",attrs:{title:"",value:"",label:""},scopedSlots:t._u([{key:"icon",fn:function(){return[e("van-row",[e("van-col",{attrs:{span:"24",align:"left"}},[e("span",{staticStyle:{"font-weight":"800"}},[t._v("ID:"+t._s(n.id))]),t._v("\n                                                 \n                                                "),e("span",{staticStyle:{color:"#FDD95B","font-style":"italic","font-weight":"800"}},[t._v(t._s(n.name))])]),t._v(" "),e("van-col",{attrs:{span:"24",align:"left"}},[t._v(t._s(n.time))])],1)]},proxy:!0},{key:"right-icon",fn:function(){return[n.is_activation?e("div",{staticStyle:{"align-items":"center",display:"flex"}},[0==n.is_start&&1==n.is_ransom?e("img",{attrs:{src:a("qBSq"),alt:"",width:"50"},on:{click:function(a){return t.startTicket(n)}}}):e("img",{attrs:{src:a("Qc+s"),alt:"",width:"40"}}),t._v(" "),1==n.is_answer?e("img",{attrs:{src:a("KF+z"),alt:"",width:"50"}}):e("img",{attrs:{src:a("A3zh"),alt:"",width:"53"}})]):e("div",[e("span",[t._v(t._s(t.$t("question:hoursActivation",{time:n.activation_time})))]),t._v(" "),e("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:a("Ywzj"),alt:"",width:"50"}})])]},proxy:!0}],null,!0)}),t._v(" "),e("van-cell",{staticClass:"center-content",scopedSlots:t._u([{key:"title",fn:function(){return[e("div",[e("van-row",{staticClass:"item"},[e("van-col",{attrs:{span:"12",align:"left"}},[e("span",{staticClass:"left"},[t._v(t._s(t.$t("question:nominalInterestRate")))]),t._v(" "),e("span",{staticClass:"right"},[t._v(t._s(t.toFixed(n.annualized,2))+"%")])]),t._v(" "),e("van-col",{attrs:{span:"12",align:"right"}},[e("span",{staticClass:"left"},[t._v(t._s(t.$t("question:realInterestRate")))]),t._v(" "),e("span",{staticClass:"right"},[t._v(t._s(t.getRealInterestRate(n)))])]),t._v(" "),e("van-col",{attrs:{span:"12",align:"left"}},[e("span",{staticClass:"left"},[t._v(t._s(t.$t("question:denomination")))]),t._v(" "),e("span",{staticClass:"right"},[t._v(t._s(t.toFixed(n.denomination,2))+" USDT")])]),t._v(" "),e("van-col",{attrs:{span:"12",align:"right"}},[e("span",{staticClass:"left"},[t._v(t._s(t.$t("question:buyPrice")))]),t._v(" "),e("span",{staticClass:"right"},[t._v(t._s(t.toFixed(n.price,2))+" USDT")])])],1)],1)]},proxy:!0}],null,!0)}),t._v(" "),e("van-cell",{staticClass:"bottom-button",scopedSlots:t._u([{key:"title",fn:function(){return[e("div",[e("van-row",[e("van-col",{attrs:{span:"24",align:"right"}},[1==n.is_ransom?e("van-button",{staticClass:"redeemed-button",attrs:{type:"primary",disabled:n.insurance_amount<=0},on:{click:function(a){return t.startRansom(n)}}},[t._v(t._s(t.$t("question:redemption")))]):e("van-button",{staticClass:"redeemed-button-disabled",attrs:{disabled:"",type:"primary"}},[t._v(t._s(t.$t("question:redeemed")))]),t._v(" "),e("van-button",{staticClass:"view-rewards",attrs:{type:"primary"},on:{click:function(a){return t.showTicketAward(n)}}},[t._v(t._s(t.$t("question:viewRewards")))])],1)],1)],1)]},proxy:!0}],null,!0)})],1):t._e()],1)}),0),t._v(" "),e("van-tab",{attrs:{title:t.$t("question:redeemed")}},t._l(t.list,function(n,a){return e("div",{key:a},[2==n.is_ransom?e("van-cell-group",{attrs:{inset:""}},[e("div",{staticClass:"list-bg"}),t._v(" "),e("van-cell",{attrs:{title:""},scopedSlots:t._u([{key:"icon",fn:function(){return[e("van-row",[e("van-col",{attrs:{span:"24",align:"left"}},[e("span",{staticStyle:{"font-weight":"800"}},[t._v("ID:"+t._s(n.id))]),t._v("\n                                                 \n                                                "),e("span",{staticStyle:{color:"#FDD95B","font-style":"italic","font-weight":"800"}},[t._v(t._s(n.name))])]),t._v(" "),e("van-col",{attrs:{span:"24",align:"left"}},[t._v(t._s(n.time))])],1)]},proxy:!0}],null,!0)}),t._v(" "),e("van-cell",{staticClass:"center-content",scopedSlots:t._u([{key:"title",fn:function(){return[e("div",[e("van-row",[e("van-col",{attrs:{span:"24"}},[t._v(t._s(t.$t("question:denomination"))+" "+t._s(t.toFixed(n.price,2))+" USDT")])],1),t._v(" "),e("van-row")],1)]},proxy:!0}],null,!0)}),t._v(" "),e("van-cell",{staticClass:"bottom-button",scopedSlots:t._u([{key:"title",fn:function(){return[e("div",[e("van-row",[e("van-col",{attrs:{span:"24",align:"right"}},[e("van-button",{staticClass:"redeemed-button-disabled",attrs:{disabled:"",type:"primary"}},[t._v(t._s(t.$t("question:redeemed")))]),t._v(" "),e("van-button",{staticClass:"view-rewards",attrs:{type:"primary"},on:{click:function(a){return t.showTicketAward(n)}}},[t._v(t._s(t.$t("question:viewRewards")))])],1)],1)],1)]},proxy:!0}],null,!0)})],1):t._e()],1)}),0)],1)],1):e("van-empty",{attrs:{description:t.$t("question:noTicket")}},[e("van-button",{staticClass:"ticket-button",attrs:{type:"info"},on:{click:function(n){return t.buyTicket()}}},[t._v(t._s(t.$t("question:ticketBuy")))])],1)],1),t._v(" "),e("van-overlay",{attrs:{show:t.loadingShow},on:{click:function(n){t.loadingShow=!1}}},[e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},[e("van-loading",{attrs:{size:"24px",vertical:"",color:"#0094ff"}},[t._v(t._s(t.$t("question:DataLoading")))])],1)])],1)},staticRenderFns:[]};n.a=e}});