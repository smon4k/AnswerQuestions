webpackJsonp([4],{"6iKR":function(e,t,n){"use strict";var a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"bg",style:{backgroundSize:e.isMobel?"100% 100%":""}}),e._v(" "),n("van-nav-bar",{attrs:{title:"钱包充提","left-text":"","right-text":"","left-arrow":""},on:{"click-left":e.onReturnLeft}}),e._v(" "),n("van-tabs",{model:{value:e.tabActive,callback:function(t){e.tabActive=t},expression:"tabActive"}},[n("van-tab",{attrs:{title:"USDT充提",to:"/usdt"}}),e._v(" "),n("van-tab",{attrs:{title:"H2O充提"}},[n("van-row",{staticClass:"container",staticStyle:{"margin-top":"20px"}},[n("van-col",{attrs:{span:24}},[n("van-tabs",{attrs:{stretch:!0},on:{click:e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("van-tab",{attrs:{title:"存入",name:"1",disabled:e.trading}},[n("van-row",{staticClass:"balance"},[n("van-col",{attrs:{span:24}},[n("div",[n("span",[e._v("平台余额："+e._s(e.keepDecimalNotRounding(Number(e.localBalance)+Number(e.walletBalance),4))+" H2O")]),e._v(" "),n("br"),e._v(" "),n("span",[e._v("钱包余额："+e._s(e.toFixed(Number(e.H2OBalance),4))+" H2O")])])])],1),e._v(" "),n("van-row",[n("van-col",{attrs:{span:24}},[n("van-form",{ref:"depositForm"},[n("van-field",{attrs:{type:"number",label:"H2O:",placeholder:"请输入充值金额",onkeypress:"return(/[\\d]/.test(String.fromCharCode(event.keyCode)))",rules:[{validator:e.checkDepositAmount,message:""}],"label-width":"50"},model:{value:e.depositForm.amount,callback:function(t){e.$set(e.depositForm,"amount",t)},expression:"depositForm.amount"}}),e._v(" "),n("van-row",{staticClass:"button-amount"},[n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(100)}}},[e._v("100")])],1),e._v(" "),n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(200)}}},[e._v("200")])],1),e._v(" "),n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(500)}}},[e._v("500")])],1)],1),e._v(" "),n("van-row",{staticClass:"button-amount"},[n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(1e3)}}},[e._v("1000")])],1),e._v(" "),n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(2e3)}}},[e._v("2000")])],1),e._v(" "),n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(5e4)}}},[e._v("50000")])],1)],1),e._v(" "),n("div",{staticClass:"submit-name"},[e.approve?n("van-button",{attrs:{type:"primary",loading:e.trading,disabled:e.trading||e.isStatus||e.isWithdraw},on:{click:function(t){return e.submitForm("depositForm")}}},[e._v("存入")]):n("van-button",{attrs:{type:"primary",loading:e.trading,disabled:e.trading},on:{click:e.startApprove}},[e._v("批准")])],1)],1)],1)],1)],1),e._v(" "),n("van-tab",{attrs:{title:"提取",name:"2",disabled:e.trading}},[n("van-row",{staticClass:"balance"},[n("van-col",{attrs:{span:24}},[n("div",[n("span",[e._v("平台余额："+e._s(e.toFixed(Number(e.localBalance)+Number(e.walletBalance),4))+" H2O")]),e._v(" "),n("br"),e._v(" "),n("span",[e._v("钱包余额："+e._s(e.toFixed(Number(e.H2OBalance),4))+" H2O")])])])],1),e._v(" "),n("van-row",[n("van-col",{attrs:{span:24}},[n("van-form",{ref:"withdrawForm"},[n("van-field",{attrs:{label:"H2O:",type:"number",placeholder:"请输入金额",min:"0",max:e.maxWithdrawableBalance(),onkeypress:"return(/[\\d]/.test(String.fromCharCode(event.keyCode)))",rules:[{validator:e.checkWithdrawalAmount,message:""}],"label-width":"50"},model:{value:e.withdrawForm.amount,callback:function(t){e.$set(e.withdrawForm,"amount",t)},expression:"withdrawForm.amount"}}),e._v(" "),n("van-row",{staticClass:"button-amount"},[n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(100)}}},[e._v("100")])],1),e._v(" "),n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(200)}}},[e._v("200")])],1),e._v(" "),n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(500)}}},[e._v("500")])],1)],1),e._v(" "),n("van-row",{staticClass:"button-amount"},[n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(1e3)}}},[e._v("1000")])],1),e._v(" "),n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(2e3)}}},[e._v("2000")])],1),e._v(" "),n("van-col",{attrs:{span:8}},[n("van-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.buttonAmount(5e4)}}},[e._v("50000")])],1)],1),e._v(" "),n("div",{staticClass:"submit-name"},[e.approve?n("van-button",{attrs:{type:"primary",loading:e.trading,disabled:e.trading||e.isStatus||e.isGame||e.isWithdraw},on:{click:function(t){return e.submitForm("withdrawForm")}}},[e._v("提取")]):n("van-button",{attrs:{type:"primary",loading:e.trading,disabled:e.trading},on:{click:e.startApprove}},[e._v("批准")])],1)],1)],1)],1)],1)],1)],1)],1)],1)],1),e._v(" "),n("van-overlay",{attrs:{show:e.trading}},[n("div",{staticClass:"wrapper"},[n("van-loading",{attrs:{type:"spinner",color:"#1989fa"}})],1)]),e._v(" "),n("van-action-sheet",{attrs:{actions:e.actions},on:{select:e.onSelect},model:{value:e.selectCurrencyShow,callback:function(t){e.selectCurrencyShow=t},expression:"selectCurrencyShow"}})],1)},staticRenderFns:[]};t.a=a},"8ThQ":function(e,t,n){e.exports=n.p+"static/img/2.9d44a18.jpg"},GCbl:function(e,t,n){var a=n("lL8v");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n("rjj0")("d8d8dc8e",a,!0,{})},JHeQ:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"c",function(){return v});var a=n("GKmE"),r=n("yePN"),o=n.n(r),i=n("vPne"),c=n.n(i),s=n("cx+2");function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,o){try{var i=t[r](o),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}("next")})}}var l=function(e,t,n,r){var i=this,c=__ownInstance__.$store.state.base.address,s=n&&r?web3.utils.toHex(Object(a.g)(n,r)):web3.utils.toHex(Object(a.h)(1.157920892373163*Math.pow(10,59))),l=new web3.eth.Contract(o.a,e),d=t||__ownInstance__.$store.state.base.bankAddress,v=l.methods.approve(d,s).encodeABI(),p=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:p}),new Promise(function(t,n){var a,r=void 0;web3.eth.getTransactionCount(c).then((a=u(regeneratorRuntime.mark(function a(o){var s,u,l,d;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,web3.eth.getGasPrice();case 2:return s=a.sent,u={from:c,to:e,data:v},a.next=6,web3.eth.estimateGas(u);case 6:l=a.sent,d=[{chainId:__ownInstance__.$store.state.base.chainId,nonce:web3.utils.toHex(o),gasLimit:web3.utils.toHex(l),gasPrice:web3.utils.toHex(s),to:e,from:c,data:v}],web3.eth.sendTransaction(d[0]).on("transactionHash",function(e){console.log("hash",e),e&&(r=e)}).on("receipt",function(e){__ownInstance__.$store.dispatch("changeTradeStatus",{id:p,val:1,hash:r}),t(r)}).on("confirmation",function(e,t){}).on("error",function(e){var t=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:p,val:2,isUserDeny:t,hash:r}),console.log("err",e),n(e)});case 9:case"end":return a.stop()}},a,i)})),function(e){return a.apply(this,arguments)}))})},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18,o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],__ownInstance__.$store.state.base.address),d=n||__ownInstance__.$store.state.base.gamesFillingAddress,v=new web3.eth.Contract(c.a,d),p=Object(a.g)(e,r),m=v.methods.BuyTokenTogToken(p,t).encodeABI(),A=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:A}),new Promise(function(e,t){var n,a=void 0;web3.eth.getTransactionCount(l).then((n=u(regeneratorRuntime.mark(function n(r){var c,v,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,web3.eth.getGasPrice();case 2:return c=n.sent,n.next=5,web3.eth.estimateGas({from:l,to:d,data:m});case 5:v=n.sent,console.log("estimateGas",v),p=[{from:l,to:d,data:m,gasPrice:web3.utils.toHex(c),gas:web3.utils.toHex(v)}],web3.eth.sendTransaction(p[0]).on("transactionHash",function(){var e=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("hash",t),!t){e.next=6;break}return a=t,i.hash=t,e.next=6,Object(s.i)(i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).on("receipt",function(t){__ownInstance__.$store.dispatch("changeTradeStatus",{id:A,val:1,hash:a}),e(a)}).on("confirmation",function(e,t){}).on("error",function(e){var n=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:A,val:2,isUserDeny:n,hash:a}),console.log("err",e),t(e)});case 9:case"end":return n.stop()}},n,o)})),function(e){return n.apply(this,arguments)})).catch(function(e){console.log("receiveAirdrop_err",e),__ownInstance__.$store.dispatch("changeTradeStatus",{id:A,val:2,hash:a}),t(e)})})},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:18,o=this,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},l=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],__ownInstance__.$store.state.base.address),d=n||__ownInstance__.$store.state.base.gamesFillingAddress,v=new web3.eth.Contract(c.a,d),p=Object(a.g)(e,r),m=v.methods.gTokenToBuyToken(p,t).encodeABI(),A=Object(a.g)("0",r),f=(new Date).getTime().toString();return __ownInstance__.$store.dispatch("createOrderForm",{val:0,id:f}),new Promise(function(e,t){var n,a=void 0;web3.eth.getTransactionCount(l).then((n=u(regeneratorRuntime.mark(function n(r){var c,v,p;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,web3.eth.getGasPrice();case 2:return c=n.sent,n.next=5,web3.eth.estimateGas({from:l,to:d,data:m,value:web3.utils.toHex(A)});case 5:v=n.sent,console.log("estimateGas",v),(p=[{from:l,to:d,data:m,gasPrice:web3.utils.toHex(c),gas:web3.utils.toHex(v)}])[0].value=web3.utils.toHex(A),web3.eth.sendTransaction(p[0]).on("transactionHash",function(){var e=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("hash",t),!t){e.next=6;break}return a=t,i.hash=t,e.next=6,Object(s.i)(i);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()).on("receipt",function(t){__ownInstance__.$store.dispatch("changeTradeStatus",{id:f,val:1,hash:a}),e(a)}).on("confirmation",function(e,t){}).on("error",function(e){var n=4001===e.code;__ownInstance__.$store.dispatch("changeTradeStatus",{id:f,val:2,isUserDeny:n,hash:a}),console.log("err",e),t(e)});case 10:case"end":return n.stop()}},n,o)})),function(e){return n.apply(this,arguments)})).catch(function(e){console.log("receiveAirdrop_err",e),__ownInstance__.$store.dispatch("changeTradeStatus",{id:f,val:2,hash:a}),t(e)})})}},W3H0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("w0q5"),r=n("6iKR");var o=function(e){n("GCbl")},i=n("VU/8")(a.a,r.a,!1,o,"data-v-50e6650e",null);t.default=i.exports},lL8v:function(e,t,n){var a=n("kxFB");(e.exports=n("FZ+f")(!0)).push([e.i,".container[data-v-50e6650e] .bg{background-image:url("+a(n("8ThQ"))+");background-repeat:no-repeat;background-attachment:fixed;background-position:50%;top:0;left:0;width:100%;height:100%;z-index:-10;position:fixed;filter:blur(2px)}.container[data-v-50e6650e] .van-nav-bar{background-color:transparent}.container[data-v-50e6650e] .van-nav-bar .van-nav-bar__left i{color:#fff;font-size:20px}.container[data-v-50e6650e] .van-nav-bar .van-nav-bar__title{color:#fff}.container[data-v-50e6650e] .van-tab{color:#7f8285}.container[data-v-50e6650e] .van-tabs__nav{background-color:transparent}.container[data-v-50e6650e] .van-tabs__nav .van-tab--active{color:#fff}.container[data-v-50e6650e] div{min-height:0}.container[data-v-50e6650e] input[type=number]{-moz-appearance:textfield}.container[data-v-50e6650e] input[type=number]::-webkit-inner-spin-button,.container[data-v-50e6650e] input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.container[data-v-50e6650e] .container{color:#fff;border-radius:20px!important;background-color:#ae8bf5!important;width:80%;height:50vh;padding:20px;text-align:center;margin:0 auto}.container[data-v-50e6650e] .container .van-form{margin-top:15px}.container[data-v-50e6650e] .container .van-tabs__nav{background-color:#ae8bf5}.container[data-v-50e6650e] .container .van-tabs__item{height:60px;line-height:60px;font-size:20px;font-weight:800}.container[data-v-50e6650e] .container .van-tab--active{color:#fff}.container[data-v-50e6650e] .container .van-tabs__item.is-active{color:#409eff}.container[data-v-50e6650e] .container .van-loading-spinner{margin-top:-11px}.container[data-v-50e6650e] .container .van-loading-spinner .circular{width:20px;height:20px}.container[data-v-50e6650e] .container .van-form-item__label{color:#fff}.container[data-v-50e6650e] .container .van-field{font-size:16px;border-radius:20px}.container[data-v-50e6650e] .container .van-field .van-field__label{width:50px;margin-right:0}.container[data-v-50e6650e] .container .van-input__inner{background-color:#333257;border:1px solid #333257;padding:0;height:50px;line-height:50px;font-size:16px}.container[data-v-50e6650e] .container .van-input-group__append button.van-button{color:#409eff}.container[data-v-50e6650e] .container .van-input-group__append,.container[data-v-50e6650e] .container .van-input-group__prepend{background-color:#333257;color:#fff;border:1px solid #333257}.container[data-v-50e6650e] .container .balance{text-align:left;height:30px;line-height:30px}.container[data-v-50e6650e] .container .van-button{border-radius:30px;width:100px;border:0}.container[data-v-50e6650e] .container .button-amount{line-height:50px}.container[data-v-50e6650e] .container .button-amount .van-button--primary.is-plain{background:#8481e0;color:#fff}.container[data-v-50e6650e] .container .button-amount .van-button{border-radius:5px}.container[data-v-50e6650e] .container .button-amount .van-button:after{background-color:#409eff!important}.container[data-v-50e6650e] .container .button-amount .van-button:focus,.container[data-v-50e6650e] .container .button-amount .van-button:hover{background-color:#8c1af5!important;color:#fff}.container[data-v-50e6650e] .container .submit-name{margin-top:20px}.container[data-v-50e6650e] .container .submit-name .van-button--primary{width:200px;border-radius:5px;background-color:#8c1af5;border:0}.container[data-v-50e6650e] .container .submit-name .van-button--primary.is-disabled{background:#c8c9cc;color:#fff}.container[data-v-50e6650e] .container .submit-name .van-loading-mask{border-radius:5px;background-color:rgba(0,0,0,.8);border:0}.container[data-v-50e6650e] .wrapper{display:flex;align-items:center;justify-content:center;height:100%}","",{version:3,sources:["/Users/qinlinhui/Sites/WWW/AnswerQuestions/src/views/depositWithdrawal/h2o.vue"],names:[],mappings:"AACA,gCAAgC,+CAAkD,4BAA4B,4BAA4B,wBAA2B,MAAM,OAAO,WAAW,YAAY,YAAY,eAAe,gBAAgB,CACnP,AACD,yCAAyC,4BAA4B,CACpE,AACD,8DAA8D,WAAW,cAAc,CACtF,AACD,6DAA6D,UAAU,CACtE,AACD,qCAAqC,aAAa,CACjD,AACD,2CAA2C,4BAA4B,CACtE,AACD,4DAA4D,UAAU,CACrE,AACD,gCAAgC,YAAY,CAC3C,AACD,+CAA+C,yBAAyB,CACvE,AACD,oJAAoJ,wBAAwB,QAAQ,CACnL,AACD,uCAAuC,WAAW,6BAA8B,mCAAoC,UAAU,YAAY,aAAa,kBAAkB,aAAa,CACrL,AACD,iDAAiD,eAAe,CAC/D,AACD,sDAAsD,wBAAwB,CAC7E,AACD,uDAAuD,YAAY,iBAAiB,eAAe,eAAe,CACjH,AACD,wDAAwD,UAAU,CACjE,AACD,iEAAiE,aAAa,CAC7E,AACD,4DAA4D,gBAAgB,CAC3E,AACD,sEAAsE,WAAW,WAAW,CAC3F,AACD,6DAA6D,UAAU,CACtE,AACD,kDAAkD,eAAe,kBAAkB,CAClF,AACD,oEAAoE,WAAW,cAAc,CAC5F,AACD,yDAAyD,yBAAyB,yBAAyB,UAAU,YAAY,iBAAiB,cAAc,CAC/J,AACD,kFAAkF,aAAa,CAC9F,AACD,iIAAiI,yBAAyB,WAAW,wBAAwB,CAC5L,AACD,gDAAgD,gBAAgB,YAAY,gBAAgB,CAC3F,AACD,mDAAmD,mBAAmB,YAAY,QAAQ,CACzF,AACD,sDAAsD,gBAAgB,CACrE,AACD,oFAAoF,mBAAmB,UAAU,CAChH,AACD,kEAAkE,iBAAiB,CAClF,AACD,wEAAyE,kCAAmC,CAC3G,AACD,gJAAgJ,mCAAoC,UAAU,CAC7L,AACD,oDAAoD,eAAe,CAClE,AACD,yEAAyE,YAAY,kBAAkB,yBAAyB,QAAQ,CACvI,AACD,qFAAqF,mBAAmB,UAAU,CACjH,AACD,sEAAsE,kBAAkB,gCAAiC,QAAQ,CAChI,AACD,qCAAqC,aAAa,mBAAmB,uBAAuB,WAAW,CACtG",file:"h2o.vue",sourcesContent:['\n.container[data-v-50e6650e] .bg{background-image:url("../../assets/answer/2.jpg");background-repeat:no-repeat;background-attachment:fixed;background-position:center;top:0;left:0;width:100%;height:100%;z-index:-10;position:fixed;filter:blur(2px)\n}\n.container[data-v-50e6650e] .van-nav-bar{background-color:transparent\n}\n.container[data-v-50e6650e] .van-nav-bar .van-nav-bar__left i{color:#fff;font-size:20px\n}\n.container[data-v-50e6650e] .van-nav-bar .van-nav-bar__title{color:#fff\n}\n.container[data-v-50e6650e] .van-tab{color:#7f8285\n}\n.container[data-v-50e6650e] .van-tabs__nav{background-color:transparent\n}\n.container[data-v-50e6650e] .van-tabs__nav .van-tab--active{color:#fff\n}\n.container[data-v-50e6650e] div{min-height:0\n}\n.container[data-v-50e6650e] input[type=number]{-moz-appearance:textfield\n}\n.container[data-v-50e6650e] input[type=number]::-webkit-inner-spin-button,.container[data-v-50e6650e] input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0\n}\n.container[data-v-50e6650e] .container{color:#fff;border-radius:20px !important;background-color:#AE8BF5 !important;width:80%;height:50vh;padding:20px;text-align:center;margin:0 auto\n}\n.container[data-v-50e6650e] .container .van-form{margin-top:15px\n}\n.container[data-v-50e6650e] .container .van-tabs__nav{background-color:#AE8BF5\n}\n.container[data-v-50e6650e] .container .van-tabs__item{height:60px;line-height:60px;font-size:20px;font-weight:800\n}\n.container[data-v-50e6650e] .container .van-tab--active{color:#fff\n}\n.container[data-v-50e6650e] .container .van-tabs__item.is-active{color:#409EFF\n}\n.container[data-v-50e6650e] .container .van-loading-spinner{margin-top:-11px\n}\n.container[data-v-50e6650e] .container .van-loading-spinner .circular{width:20px;height:20px\n}\n.container[data-v-50e6650e] .container .van-form-item__label{color:#fff\n}\n.container[data-v-50e6650e] .container .van-field{font-size:16px;border-radius:20px\n}\n.container[data-v-50e6650e] .container .van-field .van-field__label{width:50px;margin-right:0\n}\n.container[data-v-50e6650e] .container .van-input__inner{background-color:#333257;border:1px solid #333257;padding:0;height:50px;line-height:50px;font-size:16px\n}\n.container[data-v-50e6650e] .container .van-input-group__append button.van-button{color:#409EFF\n}\n.container[data-v-50e6650e] .container .van-input-group__append,.container[data-v-50e6650e] .container .van-input-group__prepend{background-color:#333257;color:#fff;border:1px solid #333257\n}\n.container[data-v-50e6650e] .container .balance{text-align:left;height:30px;line-height:30px\n}\n.container[data-v-50e6650e] .container .van-button{border-radius:30px;width:100px;border:0\n}\n.container[data-v-50e6650e] .container .button-amount{line-height:50px\n}\n.container[data-v-50e6650e] .container .button-amount .van-button--primary.is-plain{background:#8481e0;color:#fff\n}\n.container[data-v-50e6650e] .container .button-amount .van-button{border-radius:5px\n}\n.container[data-v-50e6650e] .container .button-amount .van-button::after{background-color:#409EFF !important\n}\n.container[data-v-50e6650e] .container .button-amount .van-button:focus,.container[data-v-50e6650e] .container .button-amount .van-button:hover{background-color:#8C1AF5 !important;color:#fff\n}\n.container[data-v-50e6650e] .container .submit-name{margin-top:20px\n}\n.container[data-v-50e6650e] .container .submit-name .van-button--primary{width:200px;border-radius:5px;background-color:#8C1AF5;border:0\n}\n.container[data-v-50e6650e] .container .submit-name .van-button--primary.is-disabled{background:#c8c9cc;color:#fff\n}\n.container[data-v-50e6650e] .container .submit-name .van-loading-mask{border-radius:5px;background-color:rgba(0,0,0,0.8);border:0\n}\n.container[data-v-50e6650e] .wrapper{display:flex;align-items:center;justify-content:center;height:100%\n}\n'],sourceRoot:""}])},w0q5:function(e,t,n){"use strict";var a=n("mtWM"),r=n.n(a),o=n("NYxO"),i=n("JHeQ"),c=n("cx+2"),s=n("GKmE"),u=n("QKB9"),l=n.n(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e};function v(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function a(r,o){try{var i=t[r](o),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}("next")})}}t.a={name:"Index",data:function(){return{tabActive:1,activeName:"1",localBalance:0,walletBalance:0,isStatus:!1,isGame:!1,isGameInfoNum:0,isWithdraw:!1,approve:!1,trading:!1,buttonAmountNum:0,H2OBalance:0,depositForm:{amount:""},withdrawForm:{amount:""},balanceTimeInterval:null,refreshTime:5e3,actions:[{name:"H2O"},{name:"USDT"}],selectCurrencyShow:!1,currencyName:"H2O"}},activated:function(){this.refreshData()},beforeRouteLeave:function(e,t,n){this.balanceTimeInterval&&(clearInterval(this.balanceTimeInterval),this.balanceTimeInterval=null),n()},created:function(){},watch:{isConnected:{immediate:!0,handler:function(e){var t=this;return v(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e&&t.approve;case 1:case"end":return n.stop()}},n,t)}))()}},changeData:{immediate:!0,handler:function(e){var t=this;return v(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.address){n.next=7;break}return n.next=3,t.getIsApprove();case 3:return n.next=5,t.getUserInfo();case 5:return n.next=7,t.refreshData();case 7:case"end":return n.stop()}},n,t)}))()}}},computed:d({},Object(o.c)({isConnected:function(e){return e.base.isConnected},address:function(e){return e.base.address},gamesFillingAddress:function(e){return e.base.h2oFillingAddress},apiUrl:function(e){return e.base.apiUrl},userId:function(e){return e.base.userId},isMobel:function(e){return e.comps.isMobel}}),{changeData:function(){return{apiUrl:this.apiUrl,address:this.address}}}),methods:{checkDepositAmount:function(e){if(!e)return!1;var t=this.H2OBalance;return!(Number(e)>t)},checkWithdrawalAmount:function(e){if(console.log(e),!e)return!1;var t=this.maxWithdrawableBalance();return!(Number(e)>t)},pageSwitchChange:function(e,t){!1===t?(this.refreshData(),this.getUserInfo()):this.balanceTimeInterval&&(clearInterval(this.balanceTimeInterval),this.balanceTimeInterval=null)},refreshData:function(){var e=this;return v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.timeInterval=setInterval(v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.b)(18,e.gamesFillingAddress);case 2:return e.walletBalance=t.sent,t.next=5,Object(c.a)(l.a.H2O,18);case 5:e.H2OBalance=t.sent;case 6:case"end":return t.stop()}},t,e)})),e.refreshTime);case 1:case"end":return t.stop()}},t,e)}))()},maxWithdrawableBalance:function(){return Number(this.walletBalance)+Number(this.localBalance)},handleClick:function(e,t){var n=this;return v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.depositForm.amount="",n.withdrawForm.amount="";case 2:case"end":return e.stop()}},e,n)}))()},getIsApprove:function(){var e=this;return v(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.a)(l.a.H2O,18);case 2:n=t.sent,console.log("H2O balance",n),e.tokenBalance=n,Object(c.f)(l.a.H2O,18,n,e.gamesFillingAddress).then(function(t){console.log("isApprove",t),e.approve=!!t});case 6:case"end":return t.stop()}},t,e)}))()},startApprove:function(){var e=this;this.trading=!0,Object(i.a)(l.a.H2O,this.gamesFillingAddress).then(function(t){t&&(e.approve=!0,e.trading=!1)}).finally(function(){e.trading=!1})},submitForm:function(e){var t=this;return v(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.$refs[e].validate().then(v(regeneratorRuntime.mark(function e(){var n,a,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.trading){e.next=23;break}return t.trading=!0,n=0,a="",e.next=6,t.getIsInTradeProgress();case 6:if(1!=t.isStatus&&!t.isWithdraw){e.next=9;break}return t.trading=!1,e.abrupt("return",!1);case 9:if(1!=t.activeName){e.next=14;break}n=t.depositForm.amount,a=i.b,e.next=19;break;case 14:if(!t.isGame){e.next=17;break}return t.trading=!1,e.abrupt("return",!1);case 17:n=t.withdrawForm.amount,a=i.c;case 19:r={amount:Number(n),address:t.address,userId:t.userId,type:Number(t.activeName),h2o_local_balance:t.localBalance,h2o_wallet_balance:t.walletBalance,hash:"",currency:"h2o"},a(n,l.a.H2O,t.gamesFillingAddress,18,r,2).then(function(){var e=v(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=10;break}if(1!=t.activeName){e.next=7;break}return Object(c.g)(0,!0,"h20"),e.next=5,t.getGameFillingBalanceFun(t.activeName,n);case 5:e.next=10;break;case 7:Object(c.g)(0,!1,"h20"),t.resetForm("depositForm"),t.resetForm("withdrawForm");case 10:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}()).finally(function(){t.trading=!1}),e.next=25;break;case 23:return console.log("error submit!!"),e.abrupt("return",!1);case 25:case"end":return e.stop()}},e,t)}))).catch(function(e){return console.log("error submit!!"),!1});case 1:case"end":return n.stop()}},n,t)}))()},setDepositWithdraw:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return v(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.a.post(t.apiUrl+"/Api/Depositwithdrawal/depositWithdraw",{amount:Number(e),address:t.address,userId:t.userId,type:Number(t.activeName),local_balance:t.localBalance,wallet_balance:t.walletBalance,currency:"h2o",hash:n}).then(function(e){e&&1e4==e.code?(t.getUserInfo(!0),1==t.activeName?Object(c.g)(0,!0,"h2o"):Object(c.g)(0,!1,"h2o"),t.trading=!1,t.$notify({type:"success",message:1==t.activeName?"存款成功":"提取成功"})):(t.trading=!1,t.$notify({type:"danger",message:error}))}).catch(function(e){console.log(e),t.$notify({type:"danger",message:e})});case 2:case"end":return a.stop()}},a,t)}))()},getGameFillingBalanceFun:function(e,t){var n=this;return v(regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:r=setInterval(v(regeneratorRuntime.mark(function a(){var o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,web3.eth.getTransactionReceipt(t);case 2:if(o=a.sent,console.log(o),!o||!o.status){a.next=11;break}return a.next=7,Object(c.h)(e,2,!0,"h2o");case 7:n.trading=!1,n.isWithdraw=!1,n.isStatus=!1,clearInterval(r);case 11:case"end":return a.stop()}},a,n)})),3e3);case 1:case"end":return a.stop()}},a,n)}))()},timeWithdrawStatus:function(e){var t=this,n=setInterval(v(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=5;break}return a.next=3,Object(c.c)(e);case 3:a.sent&&(clearInterval(n),Object(c.g)(0,!0,"h2o"),setTimeout(v(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.b)(18,t.gamesFillingAddress);case 2:t.walletBalance=e.sent,t.isWithdraw=!1,t.isStatus=!1;case 5:case"end":return e.stop()}},e,t)})),1e4));case 5:case"end":return a.stop()}},a,t)})),5e3)},resetForm:function(e){this.$refs[e].resetFields(),this.trading=!1},allBlanceFun:function(){return(this.localBalance>0||this.walletBalance>0)&&(this.withdrawForm.amount=Number(this.localBalance)+Number(this.walletBalance),!0)},allWalletBlanceFun:function(){return this.H2OBalance>0&&(this.depositForm.amount=Math.trunc(this.usdtBalance),!0)},getUserInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r.a.get(e.apiUrl+"/Api/Depositwithdrawal/getFillingRecordUserInfo",{params:{address:e.address}}).then(function(){var n=v(regeneratorRuntime.mark(function n(a){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(a),1e4!=a.code){n.next=20;break}return e.localBalance=Object(s.e)(a.data.h2o_local_balance,4,!0),e.isGame=a.data.isGame,!t&&a.data.isGame&&e.$notify({showClose:!0,message:"正在打赏中，无法进行操作",type:"warning"}),console.log("是否打赏中：",e.isGame),n.next=8,Object(c.b)(18,e.gamesFillingAddress);case 8:return e.walletBalance=n.sent,console.log("链上余额：",e.walletBalance),e.isStatus=1==a.data.dw_status,e.isWithdraw=a.data.isDeWith,console.log("是否充提中：",e.isStatus,e.isWithdraw),(1==a.data.dw_status||a.data.isDeWith)&&(t||e.$notify({showClose:!0,message:"有一笔交易正在进行，无法进行存取款操作",type:"warning"}),a.data.isDeWith>0&&(1==a.data.isDeWithType?e.getGameFillingBalanceFun(a.data.isDeWithStatusId,a.data.isDeWithHash):e.timeWithdrawStatus(a.data.isDeWithStatusId))),n.next=16,Object(c.a)(l.a.H2O,18);case 16:e.H2OBalance=n.sent,console.log("H2O 余额：",e.H2OBalance),n.next=21;break;case 20:console.log("get Data error");case 21:case"end":return n.stop()}},n,e)}));return function(e){return n.apply(this,arguments)}}()).catch(function(t){console.log(t),e.$notify({type:"danger",message:t})});case 1:case"end":return n.stop()}},n,e)}))()},getIsInTheGame:function(){var e=this;return v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.get(e.apiUrl+"/Api/Depositwithdrawal/getIsGameOrNot",{params:{address:e.address}}).then(function(){var t=v(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(1e4!=n.code){t.next=12;break}if(e.isGame=n.data,!n.data){t.next=8;break}return e.isGameInfoNum++,e.isGameInfoNum<=3&&e.$notify({showClose:!0,message:"The game is in progress and the operation cannot be retrieved",type:"warning"}),t.abrupt("return",!1);case 8:return e.isGameInfoNum=0,t.abrupt("return",!0);case 10:t.next=13;break;case 12:console.log("get Data error");case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.$notify({type:"danger",message:t})});case 2:case"end":return t.stop()}},t,e)}))()},getIsInTradeProgress:function(){var e=this;return v(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.get(e.apiUrl+"/Api/Depositwithdrawal/getIsInTradeProgress",{params:{address:e.address,userId:e.userId}}).then(function(){var t=v(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),1e4!=n.code){t.next=12;break}if(e.isStatus=n.data.status,e.isWithdraw=n.data.isWithdraw,1!=n.data.status&&!n.data.isWithdraw){t.next=9;break}return e.$notify({showClose:!0,message:"有一笔交易正在进行，无法进行存取款操作",type:"warning"}),t.abrupt("return",!1);case 9:return t.abrupt("return",!0);case 10:t.next=13;break;case 12:console.log("get Data error");case 13:return t.abrupt("return",!1);case 14:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.$notify({type:"danger",message:t})});case 2:case"end":return t.stop()}},t,e)}))()},buttonAmount:function(e){e&&(1==this.activeName?this.depositForm.amount=e:this.withdrawForm.amount=e)},onReturnLeft:function(){this.$router.push("/")},selectCurrencyClick:function(){this.selectCurrencyShow=!0},onSelect:function(e){this.currencyName=e.name,this.depositForm.amount="",this.withdrawForm.amount="",this.selectCurrencyShow=!1}}}}});