webpackJsonp([17],{"3E3e":function(t,n,e){var a=e("cRes");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);e("rjj0")("2554e66e",a,!1,{})},"7rgu":function(t,n,e){"use strict";var a=function(){var t=this,n=t.$createElement,a=t._self._c||n;return a("div",{staticClass:"container"},[a("div",{staticClass:"bg",style:{backgroundSize:t.isMobel?"100% 100%":""}}),t._v(" "),a("van-nav-bar",{attrs:{title:t.$t("question:myTicket"),"left-text":"","left-arrow":"","right-text":""},on:{"click-left":t.onClickLeft}}),t._v(" "),a("div",{staticClass:"main"},[t.list.length?a("div",[a("van-tabs",{model:{value:t.active,callback:function(n){t.active=n},expression:"active"}},[a("van-tab",{attrs:{title:t.$t("question:bought")}},t._l(t.list,function(n,i){return a("div",{key:i},[1==n.is_ransom?a("van-cell-group",{attrs:{inset:""}},[a("div",{staticClass:"list-bg"}),t._v(" "),a("van-cell",{staticClass:"top-title",attrs:{title:"",value:"",label:""},scopedSlots:t._u([{key:"icon",fn:function(){return[a("van-row",[a("van-col",{attrs:{span:"24",align:"left"}},[a("span",{staticStyle:{"font-weight":"800"}},[t._v("ID:"+t._s(n.id))]),t._v("\n                                                 \n                                                "),a("span",{staticStyle:{color:"#FDD95B","font-style":"italic","font-weight":"800"}},[t._v(t._s(n.name))])]),t._v(" "),a("van-col",{attrs:{span:"24",align:"left"}},[t._v(t._s(n.time))])],1)]},proxy:!0},{key:"right-icon",fn:function(){return[n.is_activation?a("div",{staticStyle:{"align-items":"center",display:"flex"}},[0==n.is_start&&1==n.is_ransom?a("img",{attrs:{src:e("qBSq"),alt:"",width:"50"},on:{click:function(e){return t.startTicket(n)}}}):a("img",{attrs:{src:e("Qc+s"),alt:"",width:"40"}}),t._v(" "),1==n.is_answer?a("img",{attrs:{src:e("KF+z"),alt:"",width:"50"}}):a("img",{attrs:{src:e("A3zh"),alt:"",width:"53"}})]):a("div",[a("span",[t._v(t._s(t.$t("question:hoursActivation",{time:n.activation_time})))]),t._v(" "),a("img",{staticStyle:{"vertical-align":"middle"},attrs:{src:e("Ywzj"),alt:"",width:"50"}})])]},proxy:!0}],null,!0)}),t._v(" "),a("van-cell",{staticClass:"center-content",scopedSlots:t._u([{key:"title",fn:function(){return[a("div",[a("van-row",{staticClass:"item"},[a("van-col",{attrs:{span:"12",align:"left"}},[a("van-row",[a("van-col",{staticClass:"left",attrs:{align:"right",span:"10"}},[t._v(t._s(t.$t("question:denomination")))]),t._v(" "),a("van-col",{staticClass:"right",attrs:{align:"left",span:"14"}},[t._v("  "+t._s(t.toFixed(n.denomination,2))+" USDT")])],1)],1),t._v(" "),a("van-col",{attrs:{span:"12",align:"left"}},[a("van-row",[a("van-col",{staticClass:"left",attrs:{align:"right",span:"10"}},[t._v(t._s(t.$t("question:nominalInterestRate")))]),t._v(" "),a("van-col",{staticClass:"right",attrs:{align:"left",span:"14"}},[t._v("  "+t._s(t.toFixed(n.annualized,2))+"%")])],1)],1),t._v(" "),a("van-col",{attrs:{span:"12",align:"right"}},[a("van-row",[a("van-col",{staticClass:"left",attrs:{align:"right",span:"10"}},[t._v(t._s(t.$t("question:buyPrice")))]),t._v(" "),a("van-col",{staticClass:"right",attrs:{align:"left",span:"14"}},[t._v("  "+t._s(t.toFixed(n.price,2))+" USDT")])],1)],1),t._v(" "),a("van-col",{attrs:{span:"12",align:"right"}},[a("van-row",[a("van-col",{staticClass:"left",attrs:{align:"right",span:"10"}},[t._v(t._s(t.$t("question:realInterestRate")))]),t._v(" "),a("van-col",{staticClass:"right",attrs:{align:"left",span:"14"}},[t._v("  "+t._s(t.getRealInterestRate(n)))])],1)],1)],1)],1)]},proxy:!0}],null,!0)}),t._v(" "),a("van-cell",{staticClass:"bottom-button",scopedSlots:t._u([{key:"title",fn:function(){return[a("div",[a("van-row",[a("van-col",{attrs:{span:"24",align:"right"}},[1==n.is_ransom?a("van-button",{staticClass:"redeemed-button",attrs:{type:"primary",disabled:n.insurance_amount<=0},on:{click:function(e){return t.startRansom(n)}}},[t._v(t._s(t.$t("question:redemption")))]):a("van-button",{staticClass:"redeemed-button-disabled",attrs:{disabled:"",type:"primary"}},[t._v(t._s(t.$t("question:redeemed")))]),t._v(" "),a("van-button",{staticClass:"view-rewards",attrs:{type:"primary"},on:{click:function(e){return t.showTicketAward(n)}}},[t._v(t._s(t.$t("question:viewRewards")))])],1)],1)],1)]},proxy:!0}],null,!0)})],1):t._e()],1)}),0),t._v(" "),a("van-tab",{attrs:{title:t.$t("question:redeemed")}},t._l(t.list,function(n,e){return a("div",{key:e},[2==n.is_ransom?a("van-cell-group",{attrs:{inset:""}},[a("div",{staticClass:"list-bg"}),t._v(" "),a("van-cell",{attrs:{title:""},scopedSlots:t._u([{key:"icon",fn:function(){return[a("van-row",[a("van-col",{attrs:{span:"24",align:"left"}},[a("span",{staticStyle:{"font-weight":"800"}},[t._v("ID:"+t._s(n.id))]),t._v("\n                                                 \n                                                "),a("span",{staticStyle:{color:"#FDD95B","font-style":"italic","font-weight":"800"}},[t._v(t._s(n.name))])]),t._v(" "),a("van-col",{attrs:{span:"24",align:"left"}},[t._v(t._s(n.time))])],1)]},proxy:!0}],null,!0)}),t._v(" "),a("van-cell",{staticClass:"center-content",scopedSlots:t._u([{key:"title",fn:function(){return[a("div",[a("van-row",[a("van-col",{attrs:{span:"24"}},[t._v(t._s(t.$t("question:denomination"))+" "+t._s(t.toFixed(n.price,2))+" USDT")])],1),t._v(" "),a("van-row")],1)]},proxy:!0}],null,!0)}),t._v(" "),a("van-cell",{staticClass:"bottom-button",scopedSlots:t._u([{key:"title",fn:function(){return[a("div",[a("van-row",[a("van-col",{attrs:{span:"24",align:"right"}},[a("van-button",{staticClass:"redeemed-button-disabled",attrs:{disabled:"",type:"primary"}},[t._v(t._s(t.$t("question:redeemed")))]),t._v(" "),a("van-button",{staticClass:"view-rewards",attrs:{type:"primary"},on:{click:function(e){return t.showTicketAward(n)}}},[t._v(t._s(t.$t("question:viewRewards")))])],1)],1)],1)]},proxy:!0}],null,!0)})],1):t._e()],1)}),0)],1)],1):a("van-empty",{attrs:{description:t.$t("question:noTicket")}},[a("van-button",{staticClass:"ticket-button",attrs:{type:"info"},on:{click:function(n){return t.buyTicket()}}},[t._v(t._s(t.$t("question:ticketBuy")))])],1)],1),t._v(" "),a("van-overlay",{attrs:{show:t.loadingShow},on:{click:function(n){t.loadingShow=!1}}},[a("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"center",height:"100%"}},[a("van-loading",{attrs:{size:"24px",vertical:"",color:"#0094ff"}},[t._v(t._s(t.$t("question:DataLoading")))])],1)])],1)};a._withStripped=!0;var i={render:a,staticRenderFns:[]};n.a=i},cRes:function(t,n,e){var a=e("kxFB");(t.exports=e("FZ+f")(!1)).push([t.i,"\n.container[data-v-0f451f65] .bg{background-image:url("+a(e("Zj3x"))+");background-repeat:no-repeat;background-attachment:fixed;background-position:center;top:0;left:0;width:100%;height:100%;z-index:-10;position:fixed\n}\n.container[data-v-0f451f65] .van-nav-bar{background-color:transparent\n}\n.container[data-v-0f451f65] .van-nav-bar .van-nav-bar__left i{color:#fff;font-size:20px\n}\n.container[data-v-0f451f65] .van-nav-bar .van-nav-bar__title{color:#fff\n}\n.container[data-v-0f451f65] .van-tabs__nav{background-color:transparent\n}\n.container[data-v-0f451f65] .van-tabs__nav .van-tabs__line{background-color:#FDD95B !important\n}\n.container[data-v-0f451f65] .van-tabs__nav .van-tab--active{color:#fff\n}\n.container[data-v-0f451f65] .van-empty__description{color:#fff\n}\n.container[data-v-0f451f65] .main{padding-bottom:60px\n}\n.container[data-v-0f451f65] .main .van-cell-group--inset{height:250px;margin-top:10px;border:2px solid #fff;border-radius:20px\n}\n.container[data-v-0f451f65] .main .van-cell-group--inset .van-cell{background-color:transparent;color:#fff\n}\n.container[data-v-0f451f65] .main .van-cell-group--inset .van-cell .van-cell__value{display:none\n}\n.container[data-v-0f451f65] .main .van-cell-group--inset .van-cell .van-cell__label{color:#fff\n}\n.container[data-v-0f451f65] .main .van-button--primary{border:0\n}\n.container[data-v-0f451f65] .main .list-bg{background:linear-gradient(#00C3E9, #2D50D2);position:absolute;width:100%;height:100%\n}\n.container[data-v-0f451f65] .main .top-title{height:63px\n}\n.container[data-v-0f451f65] .main .top-title .van-cell__title{display:flex;align-items:center;justify-content:space-around;flex-direction:column\n}\n.container[data-v-0f451f65] .main .top-title .van-cell__title .van-row{line-height:45px\n}\n.container[data-v-0f451f65] .main .center-content{height:110px\n}\n.container[data-v-0f451f65] .main .center-content .van-cell__title{display:flex;align-items:center;justify-content:space-around;flex-direction:column\n}\n.container[data-v-0f451f65] .main .center-content .van-cell__title .van-row{line-height:45px\n}\n.container[data-v-0f451f65] .main .center-content .left{font-size:16px;color:#f8f5ea\n}\n.container[data-v-0f451f65] .main .center-content .right{font-size:14px;color:#fff\n}\n.container[data-v-0f451f65] .main .bottom-button{position:absolute;bottom:8px\n}\n.container[data-v-0f451f65] .main .ticket-button{width:90px;height:30px;font-size:10px;border-radius:20px;background-color:#8C1AF5;border:0\n}\n.container[data-v-0f451f65] .main .redeemed-button{width:90px;height:40px;background:url("+a(e("UJJQ"))+") no-repeat center;background-size:contain;text-align:center\n}\n.container[data-v-0f451f65] .main .redeemed-button-disabled{width:90px;height:40px;background:url("+a(e("zBbg"))+") no-repeat center;background-size:contain;text-align:center\n}\n.container[data-v-0f451f65] .main .view-rewards{height:40px;background:url("+a(e("duWs"))+") no-repeat center;background-size:contain;text-align:center\n}\n.container[data-v-0f451f65] .main .buy-button{width:100px;height:30px;font-size:10px;border-radius:20px;background-color:#8C1AF5;border:0\n}\n.container[data-v-0f451f65] .main .van-tag--primary.van-tag--plain{color:#8C1AF5\n}\n",""])},eSQX:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("fKcC"),i=e("7rgu"),r=!1;var s=function(t){r||e("3E3e")},o=e("VU/8")(a.a,i.a,!1,s,"data-v-0f451f65",null);o.options.__file="src/views/ticket/my.vue",n.default=o.exports},fKcC:function(t,n,e){"use strict";e("XmAh");var a=e("il3B"),i=e("mtWM"),r=e.n(i),s=e("NYxO"),o=e("QKB9"),c=e.n(o),l=e("cx+2"),u=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}return t};function d(t){return function(){var n=t.apply(this,arguments);return new Promise(function(t,e){return function a(i,r){try{var s=n[i](r),o=s.value}catch(t){return void e(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}("next")})}}n.a={name:"",data:function(){return{list:[],loading:!1,finished:!1,limit:20,page:1,total:0,radio:0,ticketStatus:!1,SCTPrice:0,active:"1",loadingShow:!0}},created:function(){this.getSCTPrice()},watch:{changeData:{immediate:!0,handler:function(t){console.log(t),t.userId&&this.getMyTicketList()}}},computed:u({},Object(s.c)({address:function(t){return t.base.address},userId:function(t){return t.base.userId},isConnected:function(t){return t.base.isConnected},apiUrl:function(t){return t.base.apiUrl},isMobel:function(t){return t.comps.isMobel}}),{changeData:function(){return{address:this.address,userId:this.userId}}}),components:{},methods:{getSCTPrice:function(){var t=this;return d(regeneratorRuntime.mark(function n(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return 1e9,n.next=3,Object(l.e)(c.a.routerContractAddress,c.a.SCT,c.a.BUSDT);case 3:e=n.sent,t.SCTPrice=t.keepDecimalNotRounding(e,4);case 5:case"end":return n.stop()}},n,t)}))()},startBuy:function(t){this.$router.push({path:"/ticket/detail",query:{type:1,ticket_id:t.id}})},getMyTicketList:function(t){var n=this;return d(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n.finished&&(n.list=[],n.finished=!1),(!t||void 0==t||t.length<=0)&&(t={limit:n.limit,page:n.page,userId:n.userId}),n.userId&&r.a.get(n.apiUrl+"/Answer/Ticket/getMyTicketList",{params:t}).then(function(e){n.loading=!1,console.log(e),1e4==e.code?(e.data&&e.data.lists&&e.data.lists.length>0&&(n.page<=1?n.list=e.data.lists:t.page<=e.data.allpage&&n.list.push(e.data.lists)),t.page>=e.data.allpage&&(n.finished=!0),n.total=e.data.count,n.page+=1,console.log(n.list)):n.$notify({type:"warning",message:"加载数据失败"}),n.loadingShow=!1}).catch(function(t){n.$notify({type:"warning",message:t})}),n.loading=!1;case 4:case"end":return e.stop()}},e,n)}))()},onClickLeft:function(){this.$router.go(-1)},startTicket:function(t){var n=this;a.a.confirm({title:"",message:"门票只能开启一张，确认切换吗？"}).then(function(){r.a.get(n.apiUrl+"/Answer/Ticket/startTicket",{params:{userId:n.userId,ticket_id:t.ticket_id,user_ticket_id:t.id}}).then(function(t){1e4==t.code?(n.$notify({type:"success",message:"门票开启成功"}),setTimeout(function(){n.list=[],n.page=1,n.getMyTicketList()},1e3)):n.$notify({type:"warning",message:"开启失败"})}).catch(function(t){n.$notify({type:"warning",message:t})})}).catch(function(){console.log("已取消切换")})},showTicketAward:function(t){this.$router.push({path:"/ticket/my/award",query:{type:1,user_ticket_id:t.id,ticket_name:t.name}})},startRansom:function(t){console.log(t),this.$router.push({path:"/ticket/detail",query:{type:2,ticket_id:t.ticket_id,user_ticket_id:t.id}})},buyTicket:function(){this.$router.push("/ticket/list")},cealPaybackPeriod:function(t){var n=10/(t.capped*this.SCTPrice);return this.keepDecimalNotRounding(n,1,!0)},getRealInterestRate:function(t){var n;return n=Number(t.capped)*this.SCTPrice*365/Number(t.buy_price)*100,this.toFixed(n,2)+"%"}},mounted:function(){}}}});