webpackJsonp([8],{"8ThQ":function(e,n,t){e.exports=t.p+"static/img/2.d93b15e.jpg"},JCUO:function(e,n,t){"use strict";var a=t("mtWM"),r=t.n(a),i=t("GKmE"),o=t("NYxO"),s=t("WTx0"),c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e};function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e){return function(){var n=e.apply(this,arguments);return new Promise(function(e,t){return function a(r,i){try{var o=n[r](i),s=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(s).then(function(e){a("next",e)},function(e){a("throw",e)});e(s)}("next")})}}n.a={name:"",data:function(){return{window:window,active:2,avatarFileObj:"",isNameShow:!1,isNumberShow:!1,isIntroduceShow:!1,isSexShow:!1,isBirthdayShow:!1,isProfessionShow:!1,isAreaShow:!1,isLanguageShow:!1,fileList:[],fileBackgroundList:[],minDate:new Date(100,0,1),maxDate:new Date(3e3,10,1),currentDate:new Date(2022,0,1),avatar:"",nickname:"",username:"",showBirthdayPicker:!1,LanguageActions:[{name:"中文",label:"zh"},{name:"English",label:"en"}],isconfirm:!0,language:"zh",usdt_balance:0,h2o_balance:0}},created:function(){var e;(e=localStorage.getItem("i18nextLng"))&&void 0!==e&&(this.language=e)},computed:c({},Object(o.c)({address:function(e){return e.base.address},userId:function(e){return e.base.userId},isConnected:function(e){return e.base.isConnected},apiUrl:function(e){return e.base.apiUrl},isMobel:function(e){return e.comps.isMobel}}),{changeData:function(){return{address:this.address,apiUrl:this.apiUrl,userId:this.userId}}}),watch:{changeData:{immediate:!0,handler:function(e){(e.address||e.userId>0)&&this.getUserInfo()}}},components:{},mounted:function(){},methods:{getUserInfo:function(){var e=this;return d(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.a.get(e.apiUrl+"/Api/User/getUserInfo",{params:{address:e.address,userId:e.userId}}).then(function(){var n=d(regeneratorRuntime.mark(function n(t){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t&&1e4==t.code?(console.log(t.data),e.username=t.data.username,e.nickname=t.data.nickname,e.avatar=t.data.avatar,e.usdt_balance=Number(t.data.local_balance)+Number(t.data.wallet_balance),e.h2o_balance=Number(t.data.h2o_local_balance)+Number(t.data.h2o_wallet_balance),t.data.avatar&&""!==t.data.avatar&&(e.fileList[0]={url:t.data.avatar},e.$forceUpdate())):e.$message({type:"warning",message:"Error"}),n.abrupt("return");case 2:case"end":return n.stop()}},n,e)}));return function(e){return n.apply(this,arguments)}}()).catch(function(n){e.$message({type:"warning",message:n})});case 2:case"end":return n.stop()}},n,e)}))()},afterReadUpload:function(e){var n=this;return d(regeneratorRuntime.mark(function t(){var a,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e){t.next=13;break}return e.status="uploading",e.message="上传中...",t.next=5,n.ImageCompressionProcessing(e.file);case 5:if(!(a=t.sent)){t.next=13;break}return(i=new FormData).append("file",a),i.append("images_key","avatar"),i.append("userId",n.userId),t.next=13,r.a.post(n.apiUrl+"/Api/User/saveUserInfo",i).then(function(){var t=d(regeneratorRuntime.mark(function t(a){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!a||1e4!=a.code){t.next=5;break}return e.status="done",e.message="上传成功",t.next=5,n.getUserInfo();case 5:case"end":return t.stop()}},t,n)}));return function(e){return t.apply(this,arguments)}}()).catch(function(t){e.status="failed",e.message="上传失败",n.$message({type:"warning",message:t})});case 13:case"end":return t.stop()}},t,n)}))()},ImageCompressionProcessing:function(e){var n=this;return d(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=d(regeneratorRuntime.mark(function t(a,r){var o,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(i.i)(e);case 2:o=t.sent,s=new FileReader,o&&(s.readAsDataURL(o),s.onerror=function(e){n.$message({type:"warning",message:"压缩图片读取图片异常...."}),console.log("压缩图片读取图片异常....",e),a(!1)},s.onload=function(e){a(o)});case 5:case"end":return t.stop()}},t,n)}));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}},t,n)}))()},saveAvator:function(){this.$refs.avatarRef.chooseFile()},onClickSure:function(){this.isNameShow=!1},onClickSave:function(){this.$router.go(-1)},onClickSaveUserInfo:function(e,n){var t=this;return d(regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=u({userId:t.userId},e,n),a.next=3,r.a.post(t.apiUrl+"/Api/User/saveUserInfo",i).then(function(){var e=d(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n&&1e4==n.code?(t.isNameShow=!1,t.isIntroduceShow=!1,t.isSexShow=!1,t.isBirthdayShow=!1):t.$message({type:"warning",message:"Error"}),e.abrupt("return");case 2:case"end":return e.stop()}},e,t)}));return function(n){return e.apply(this,arguments)}}()).catch(function(e){t.$message({type:"warning",message:e})});case 3:case"end":return a.stop()}},a,t)}))()},onConfirm:function(e){this.birthday=this.timeFormat(e),this.showBirthdayPicker=!1},addressStr:function(){return this.address&&void 0!=this.address&&""!=this.address?this.address.substring(0,4)+"***"+this.address.substring(this.address.length-3):"Connect Wallet"},subAddress:function(e){return e.substring(0,4)+"***"+e.substring(e.length-3)},connectWalletClick:function(){var e=this;return d(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!=window.ethereum){n.next=3;break}return e.$message({type:"warning",message:"You do not have metamask installed"}),n.abrupt("return",!1);case 3:if(e.address&&void 0!=e.address&&""!=e.address){n.next=8;break}return n.next=6,Object(s.c)();case 6:n.next=10;break;case 8:return n.next=10,Object(s.b)();case 10:case"end":return n.stop()}},n,e)}))()},languageClick:function(e){this.language=e.label,this.$i18n.i18next.changeLanguage(e.label)},getUsdtDepositWithdraw:function(){},getH2ODepositWithdraw:function(){},loginEvent:function(){this.$router.push("/login")},setUpInfo:function(){if(console.log(this.userId),!this.userId||this.userId<=0)return this.$message({type:"warning",message:"Error"}),!1;this.$router.push("/user/setup")}}}},Mgjd:function(e,n,t){var a=t("kxFB");(e.exports=t("FZ+f")(!1)).push([e.i,"\n.container[data-v-4498f7b0] .bg{background-image:url("+a(t("8ThQ"))+");background-repeat:no-repeat;background-attachment:fixed;background-position:center;top:0;left:0;width:100%;height:100%;z-index:-10;position:fixed;filter:blur(2px)\n}\n.container[data-v-4498f7b0] .van-nav-bar{background-color:transparent\n}\n.container[data-v-4498f7b0] .van-nav-bar .van-nav-bar__left i{color:#fff;font-size:20px\n}\n.container[data-v-4498f7b0] .van-nav-bar .van-nav-bar__title{color:#fff\n}\n.container[data-v-4498f7b0] .box{width:90%;height:80vh;margin:0 auto;background-color:#AE8BF5;margin-top:30px;border-radius:30px\n}\n.container[data-v-4498f7b0] .box .content{padding:16px 16px 160px\n}\n.container[data-v-4498f7b0] .box .van-popup--bottom.van-popup--round{height:100vh\n}\n.container[data-v-4498f7b0] .box .van-action-sheet{max-height:100%\n}\n.container[data-v-4498f7b0] .box .avator{padding:20px;text-align:center\n}\n.container[data-v-4498f7b0] .box .avator .preview{width:100px;height:100px;border-radius:50px\n}\n.container[data-v-4498f7b0] .box .avator .upload-icon{color:#dcdee0;font-size:24px;top:50%;left:50%;margin-top:-12px;margin-left:-12px;position:absolute\n}\n.container[data-v-4498f7b0] .box .avator .uploader{display:flex;width:100px;height:100px;border-radius:100%;margin:0 auto;background-color:#f7f8fa\n}\n.container[data-v-4498f7b0] .box .avator .uploader .van-uploader__upload{width:100px;height:100px\n}\n.container[data-v-4498f7b0] .box .avator .uploader .van-uploader__preview-image{width:100px;height:100px\n}\n.container[data-v-4498f7b0] .box .avator .uploader .van-uploader__input-wrapper{position:unset\n}\n.container[data-v-4498f7b0] .box .avator .photograph{position:relative;margin:0 auto;width:20px;height:20px;background-color:black;border-radius:100%;left:35px;font-size:20px;bottom:20px\n}\n.container[data-v-4498f7b0] .box .avator .photograph img{width:15px;height:15px;margin-bottom:2px\n}\n.container[data-v-4498f7b0] .box .item .item-index{border-bottom:1px solid #A79BA9\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-cell{background-color:#AE8BF5;color:#fff\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-cell .van-cell__value{color:#fff\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-cell--clickable{height:50px;line-height:30px;vertical-align:middle\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-popup{background-color:#AE8BF5\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-popup .van-nav-bar__text{color:#fff\n}\n.container[data-v-4498f7b0] .box .item .item-index .hint{color:#fff;padding-left:15px\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-cell__left-icon,.container[data-v-4498f7b0] .box .item .item-index .van-cell__right-icon{line-height:30px;color:#fff\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-sheet .van-cell,.container[data-v-4498f7b0] .box .item .item-index .van-sheet .van-picker{width:95%;border-radius:15px;margin:0 auto\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-sheet .van-cell-group{margin:10px;border-radius:15px\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-sheet .van-cell-group .van-cell{background-color:#fff;border-radius:15px\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-sheet .van-hairline--top-bottom::after{border-width:inherit !important\n}\n.container[data-v-4498f7b0] .box .item .item-index .van-language-sheet{height:auto !important\n}\n.container[data-v-4498f7b0] .box .item .item-index .background-classname{height:100px;line-height:80px\n}\n.container[data-v-4498f7b0] .box .item .item-index .background-classname .van-cell__right-icon{line-height:80px\n}\n.container[data-v-4498f7b0] .box .item .item-index .background-classname .van-uploader__mask-message{margin-top:0 !important;line-height:unset !important\n}\n",""])},ZOuW:function(e,n,t){var a=t("Mgjd");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t("rjj0")("21d69264",a,!1,{})},md3T:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("JCUO"),r=t("vJwo"),i=!1;var o=function(e){i||t("ZOuW")},s=t("VU/8")(a.a,r.a,!1,o,"data-v-4498f7b0",null);s.options.__file="src/views/user/index.vue",n.default=s.exports},vJwo:function(e,n,t){"use strict";var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container"},[t("div",{staticClass:"bg",style:{backgroundSize:e.isMobel?"100% 100%":""}}),e._v(" "),t("van-nav-bar",{attrs:{title:e.$t("question:setUp"),"left-text":"","right-text":"","left-arrow":""},on:{"click-left":e.onClickSave}}),e._v(" "),t("div",{staticClass:"box"},[t("div",{staticClass:"avator"},[t("van-uploader",{ref:"avatarRef",staticClass:"uploader",attrs:{accept:"image/*",deletable:!0,"max-count":"1","after-read":e.afterReadUpload,"preview-full-image":!1},model:{value:e.fileList,callback:function(n){e.fileList=n},expression:"fileList"}})],1),e._v(" "),t("div",{staticClass:"item"},[t("div",{staticClass:"item-index"},[t("van-cell",{attrs:{"is-link":"",title:e.$t("question:walletAddress")},on:{click:function(n){return e.connectWalletClick()}}},[e.window.ethereum?t("div",[e._v(e._s(e.addressStr()))]):e.window.ethereum||e.userId?t("div",[e._v(e._s(e.address?e.subAddress(e.address):"Connect Wallet"))]):t("div",{on:{click:function(n){return e.loginEvent()}}},[e._v(e._s(e.$t("question:logInRegister")))])])],1),e._v(" "),t("div",{staticClass:"item-index"},[t("van-cell",{attrs:{"is-link":"",title:e.$t("question:username")}},[t("div",[e._v(e._s(e.username?e.username:"Unnamed"))])])],1),e._v(" "),t("div",{staticClass:"item-index"},[t("van-cell",{attrs:{"is-link":"",title:e.$t("question:accountBinding")},on:{click:function(n){return e.setUpInfo()}}})],1),e._v(" "),t("div",{staticClass:"item-index"},[t("van-cell",{attrs:{"is-link":"",title:"USDT"+e.$t("question:Balance")},on:{click:function(n){return e.getUsdtDepositWithdraw()}}},[t("div",[e._v(e._s(e.toFixed(e.usdt_balance,4))+" USDT")])])],1),e._v(" "),t("div",{staticClass:"item-index"},[t("van-cell",{attrs:{"is-link":"",title:"H2O"+e.$t("question:Balance")},on:{click:function(n){return e.getH2ODepositWithdraw()}}},[t("div",[e._v(e._s(e.toFixed(e.h2o_balance,4))+" H2O")])])],1),e._v(" "),t("div",{staticClass:"item-index"},[t("van-cell",{attrs:{"is-link":"",title:e.$t("question:nickname")},on:{click:function(n){e.isNameShow=!0}}},[t("div",[e._v(e._s(e.nickname?e.nickname:e.$t("question:enterName")))])]),e._v(" "),t("van-action-sheet",{staticClass:"van-sheet",attrs:{title:"","close-on-click-action":""},model:{value:e.isNameShow,callback:function(n){e.isNameShow=n},expression:"isNameShow"}},[t("van-nav-bar",{attrs:{title:e.$t("question:editName"),"left-text":e.$t("question:Cancel"),"right-text":e.$t("question:Save")},on:{"click-left":function(n){e.isNameShow=!1},"click-right":function(n){return e.onClickSaveUserInfo("nickname",e.nickname)}}}),e._v(" "),t("van-cell-group",[t("van-field",{attrs:{label:"",placeholder:e.$t("question:addName")},model:{value:e.nickname,callback:function(n){e.nickname=n},expression:"nickname"}})],1),e._v(" "),t("span",{staticClass:"hint"},[e._v(e._s(e.$t("question:editNamePlease")))])],1)],1),e._v(" "),t("div",{staticClass:"item-index"},[t("van-cell",{attrs:{"is-link":"",title:e.$t("question:language")},on:{click:function(n){e.isLanguageShow=!0}}},["zh"===e.language?t("div",[e._v("中文")]):t("div",[e._v("English")])]),e._v(" "),t("van-action-sheet",{staticClass:"van-language-sheet",attrs:{actions:e.LanguageActions,"cancel-text":e.$t("question:Cancel"),"close-on-click-action":""},on:{select:e.languageClick},model:{value:e.isLanguageShow,callback:function(n){e.isLanguageShow=n},expression:"isLanguageShow"}})],1)])])],1)};a._withStripped=!0;var r={render:a,staticRenderFns:[]};n.a=r}});